(()=>{"use strict";const t=class{constructor(t){this.aside=t,this.closeAsideBtn=document.querySelector(".closeAside"),this.asideContainer=document.querySelector(".asideContainer"),this.deleteTaskBtn=document.querySelector(".deleteTask")}loadUI(){this.closeAsideBtn.addEventListener("click",(()=>{this.closeAside()})),this.deleteTaskBtn.addEventListener("click",(()=>{this.closeAside(),this.aside.mediator.notify(this.aside,"deleteTask",this.aside.currTask)}))}closeAside(){this.asideContainer.style.width="0px",this.aside.mediator.notify(this.aside,"asideClosed",null)}openAside(){this.aside.mediator.notify(this.aside,"asideOpened",null),this.asideContainer.style.width="240px"}},e=class{constructor(){this.taskTitleElement=document.querySelector(".taskTitle"),this.checklistElement=document.querySelector(".checklist"),this.dueDateElement=document.querySelector(".duedate"),this.noteElement=document.querySelector(".note"),this.createDateElement=document.querySelector(".createDate"),this.priorityElement=document.querySelector(".priority")}renderTaskInfo(t){this.taskTitleElement.textContent=t.title,this.dueDateElement.textContent=`Due-Date: ${t.dueDate}`,this.noteElement.textContent=t.note,this.priorityElement.textContent=`Priority: ${t.priority}`,this.createDateElement.textContent=`Created on: ${t.createDate}`,this.checklistElement.innerHTML="";for(let e of t.checklist){let t=document.createElement("li");t.textContent=e,this.checklistElement.appendChild(t)}}},i=class{constructor(){this.defaultList=document.querySelector(".projects.default"),this.userList=document.querySelector(".projects.user")}createElement(t,e=[]){let i=document.createElement(t);return e.forEach((t=>{i.classList.add(t)})),i}createTitleElement(t){let e=this.createElement("p",["title"]);return e.textContent=t,e}createTaskCounter(t){let e=this.createElement("p",["taskCount"]);return e.textContent=t,e}createProjectItem(t,e){let i=this.createElement("li");return i.dataset.uid=t,i.appendChild(this.createTitleElement(e.title)),e.todoList.length>0&&i.appendChild(this.createTaskCounter(e.todoList.length)),i}renderProjects(t){this.defaultList.innerHTML="",this.userList.innerHTML="";for(let[e,i]of t){let t=this.createProjectItem(e,i);"default"===i.type?this.defaultList.appendChild(t):this.userList.appendChild(t)}}},s=class{constructor(t){this.sidenav=t,this.sidenavContainer=document.querySelector(".sidenavContainer"),this.addProjectBtn=document.querySelector("#addProject"),this.closeSidenavBtn=document.querySelector("#closeSidenav"),this.openSidenavBtn=document.querySelector("#openSidenav")}loadUI(){this.addProjectBtn.addEventListener("click",(t=>{this.sidenav.mediator.notify(this.sidenav,"newProject",null)})),this.closeSidenavBtn.addEventListener("click",(()=>{this.closeSideNav()})),this.openSidenavBtn.addEventListener("click",(()=>{this.openSideNav()})),window.addEventListener("resize",(()=>{window.innerWidth>=800&&this.sidenavContainer.removeAttribute("style")})),this.sidenavContainer.addEventListener("click",(t=>{let e=t.target.closest("li")?.dataset.uid;e&&(this.sidenav.mediator.notify(this.sidenav,"projectSelected",this.sidenav.projectMap.get(e)),this.closeSideNav())}))}openSideNav(){this.sidenavContainer.style.width="240px",this.sidenav.mediator.notify(this.sidenav,"sidenavOpened",null)}closeSideNav(){this.sidenavContainer.removeAttribute("style"),this.sidenav.mediator.notify(this.sidenav,"sidenavClosed",null)}},r=class{constructor(t){this.main=t,this.taskList=document.querySelector(".tasklist"),this.addTaskBtn=document.querySelector(".addTask"),this.deleteProjectBtn=document.querySelector(".deleteProject")}loadUI(){this.addTaskBtn.addEventListener("click",(()=>{this.main.mediator.notify(this.main,"newTask",this.main.currProject)})),this.deleteProjectBtn.addEventListener("click",(()=>{this.main.mediator.notify(this.main,"deleteProject",this.main.currProject)})),this.taskList.addEventListener("click",(t=>{let e=t.target.dataset.uid;e&&this.main.mediator.notify(this.main,"taskSelected",this.main.taskMap.get(e))}))}},o=class{constructor(){this.tasklistContainer=document.querySelector(".tasklist"),this.titleElement=document.querySelector(".projectTitle")}createTaskItem(t,e){let i=document.createElement("li");return i.dataset.uid=t,i.textContent=e,i}renderTasks(t,e){this.tasklistContainer.innerHTML="",this.titleElement.textContent=t.title;for(let[t,i]of e){let e=this.createTaskItem(t,i.title);this.tasklistContainer.appendChild(e)}}},a=class{static getProjectData(){return{title:document.querySelector("#projectTitleInput").value}}static getTodoData(){return{title:document.querySelector("#taskTitleInput").value,dueDate:document.querySelector("#duedateInput").value,priority:document.querySelector("#priorityInput").value,note:document.querySelector("#noteInput").value}}},n=class{constructor(t){this.form=t,this.projectModal=document.querySelector(".projectModal"),this.taskModal=document.querySelector(".taskModal"),this.projectForm=document.querySelector(".projectModal form"),this.taskForm=document.querySelector(".taskModal form"),this.closeFormBtns=document.querySelectorAll('button[data-action="closeForm"]')}loadUI(){this.projectForm.addEventListener("submit",(()=>{let t=a.getProjectData();this.projectForm.reset(),this.form.mediator.notify(this.form,"addProject",t)})),this.taskForm.addEventListener("submit",(()=>{let t=a.getTodoData();this.taskForm.reset(),this.form.mediator.notify(this.form,"addTask",t)})),this.closeFormBtns.forEach((t=>{t.addEventListener("click",(t=>{t.target.closest(".modalBox").close()}))}))}showProjectForm(){this.projectModal.showModal()}showTaskForm(){this.taskModal.showModal()}},c=class{constructor({title:t="",todoList:e=[],type:i="user"}={}){this.title=t,this.todoList=e,this.type=i}addTodo(t){this.todoList.push(t)}removeTodo(t){this.todoList=this.todoList.filter((e=>e!==t))}};class d{constructor({title:t="",dueDate:e="",priority:i="",checklist:s=[],isComplete:r=!1,note:o="",createDate:a=(new Date).toDateString()}={}){this.title=t,this.dueDate=e,this.priority=i,this.checklist=s,this.isComplete=r,this.note=o,this.createDate=a}addStep(t){this.checklist.push(t)}changeStatus(){this.isComplete=!this.isComplete}changePriority(t){this.priority=t}changeDueDate(t){this.dueDate=t}}const l=new class{constructor(){this.mediator=null,this.currProjectList=null,this.currProject=null,this.currTask=null}getCurrProjectList(){return this.currProjectList}getCurrProject(){return this.currProject}getCurrTask(){return this.currTask}setProjectList(t){this.currProjectList=t}setProject(t){this.currProject=t}setTask(t){this.currTasklist=t}setMediator(t){this.mediator=t}receiveNotification(t,e){"projectsLoaded"==t?this.currProjectList=e:"projectSelected"==t?this.currProject=e:"taskSelected"==t&&(this.currTask=e)}},h=l,u={title:"Complete Project Proposal",dueDate:"2023-12-31",priority:"High",checklist:["Research","Outline","Draft"],isComplete:!1,note:"Important project for the upcoming deadline.",createDate:(new Date).toDateString()},m={title:"Buy Groceries",dueDate:"2023-12-25",priority:"Medium",checklist:["Milk","Bread","Eggs","Fruits"],isComplete:!1,note:"Don't forget to buy fresh vegetables!",createDate:(new Date).toDateString()},p={title:"Gym Workout",dueDate:"2023-12-28",priority:"Low",checklist:["Cardio","Weights","Stretching"],isComplete:!1,note:"Focus on leg exercises today.",createDate:(new Date).toDateString()},k={title:"Book Flight Tickets",dueDate:"2024-01-15",priority:"High",checklist:["Check passport","Choose seats","Confirm dates"],isComplete:!1,note:"Check for any travel restrictions due to COVID-19.",createDate:(new Date).toDateString()},j=[new d(u),new d(m),new d(p),new d(k)],f=[new c({title:"Today",type:"default"}),new c({title:"Important",type:"default"}),new c({title:"Completed",type:"default"}),new c({title:"Tasks",todoList:j,type:"default"})],y=new class{constructor(){this.components=new Set}register(t){this.components.add(t),t.setMediator(this)}unregister(t){this.components.delete(t),t.setMediator(null)}notify(t,e,i){console.log(e),this.components.forEach((s=>{s!==t&&s.receiveNotification(e,i)}))}},v=new class{constructor(){this.mediator=null,this.projectList=new Set}getProjects(){return this.projectList}addProject(t){this.projectList.add(t)}removeProject(t){this.projectList.delete(t)}setMediator(t){this.mediator=t}receiveNotification(t,e){"addProject"==t&&(this.addProject(new c(e)),this.mediator.notify(this,"projectAdded",null)),"deleteProject"==t&&(this.removeProject(e),this.mediator.notify(this,"projectDeleted",null)),"addTask"==t&&(h.currProject.addTodo(new d(e)),this.mediator.notify(this,"taskAdded",null)),"deleteTask"==t&&(h.currProject.removeTodo(e),this.mediator.notify(this,"taskDeleted",null))}};f.forEach((t=>{v.addProject(t)}));const D=new class{constructor(t){this.mediator=null,this.projectMap=new Map,this.projectList=t,this.sidenavDOM=new i,this.sidenavUI=new s(this)}init(){this.refresh(),this.sidenavUI.loadUI(),this.selectDefaultProject()}loadProjectListData(){this.projectMap.clear();for(let t of this.projectList)this.projectMap.set(this.getUID(),t)}selectDefaultProject(){this.mediator.notify(this,"projectSelected",this.projectMap.values().next().value)}refresh(){this.loadProjectListData(),this.sidenavDOM.renderProjects(this.projectMap),this.mediator.notify(this,"projectsLoaded",this.projectList)}setMediator(t){this.mediator=t}receiveNotification(t,e){"asideOpened"==t&&this.sidenavUI.closeSideNav(),"projectAdded"!=t&&"taskAdded"!=t&&"taskDeleted"!=t||this.refresh(),"projectDeleted"==t&&(this.refresh(),this.selectDefaultProject())}getUID(){return Math.floor(1e9*Math.random()).toString(36)}}(v.getProjects()),S=new class{constructor(){this.currTask=null,this.mediator=null,this.asideUI=new t(this),this.asideDOM=new e}init(){this.asideUI.loadUI()}refresh(){this.asideDOM.renderTaskInfo(this.currTask)}showTaskInfo(){this.refresh(),this.asideUI.openAside()}setCurrTask(t){this.currTask=t}setMediator(t){this.mediator=t}receiveNotification(t,e){"taskSelected"==t&&(this.setCurrTask(e),this.showTaskInfo()),"sidenavOpened"!=t&&"projectSelected"!=t||this.asideUI.closeAside()}},P=new class{constructor(){this.currProject=null,this.taskMap=new Map,this.mediator=null,this.mainUI=new r(this),this.mainDOM=new o}init(){this.mainUI.loadUI()}refresh(){this.loadProjectData(),this.mainDOM.renderTasks(this.currProject,this.taskMap)}loadProjectData(){this.taskMap.clear(),this.currProject.todoList.forEach((t=>{this.taskMap.set(this.getUID(),t)}))}getUID(){return Math.floor(1e9*Math.random()).toString(36)}setMediator(t){this.mediator=t}receiveNotification(t,e){"projectSelected"==t&&(this.currProject=e,this.refresh()),"taskAdded"==t&&this.refresh(),"taskDeleted"==t&&this.refresh()}},T=new class{constructor(){this.formUI=new n(this),this.mediator=null}init(){this.formUI.loadUI()}setMediator(t){this.mediator=t}receiveNotification(t,e){"newProject"==t&&this.formUI.showProjectForm(),"newTask"==t&&this.formUI.showTaskForm()}};y.register(D),y.register(P),y.register(S),y.register(T),y.register(h),y.register(v),D.init(),P.init(),S.init(),T.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dkosS0FBSzJLLE9BQU9ySyxRQUNoQixDQUVBLFdBQUF5SCxDQUFZdEgsR0FDUlQsS0FBS1MsU0FBV0EsQ0FDcEIsQ0FFQSxtQkFBQXVILENBQW9CQyxFQUFXQyxHQUNYLGNBQWJELEdBQ0NqSSxLQUFLMkssT0FBT3ZFLGtCQUdBLFdBQWI2QixHQUNDakksS0FBSzJLLE9BQU9yRSxjQUVwQixHTkRKLEVBQVNvQyxTQUFTLEdBQ2xCLEVBQVNBLFNBQVMsR0FDbEIsRUFBU0EsU0FBUyxHQUNsQixFQUFTQSxTQUFTLEdBQ2xCLEVBQVNBLFNBQVMsR0FDbEIsRUFBU0EsU0FBUyxHQUVsQixFQUFRYSxPQUNSLEVBQUtBLE9BQ0wsRUFBTUEsT0FDTixFQUFLQSxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kb19saXN0Ly4vc3JjL21vZHVsZXMvQXNpZGUvYXNpZGVVSS5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvbW9kdWxlcy9Bc2lkZS9hc2lkZURPTS5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvbW9kdWxlcy9TaWRlbmF2L3NpZGVuYXZET00uanMiLCJ3ZWJwYWNrOi8vdG9kb19saXN0Ly4vc3JjL21vZHVsZXMvU2lkZW5hdi9zaWRlbmF2VUkuanMiLCJ3ZWJwYWNrOi8vdG9kb19saXN0Ly4vc3JjL21vZHVsZXMvTWFpbi9tYWluVUkuanMiLCJ3ZWJwYWNrOi8vdG9kb19saXN0Ly4vc3JjL21vZHVsZXMvTWFpbi9tYWluRE9NLmpzIiwid2VicGFjazovL3RvZG9fbGlzdC8uL3NyYy9tb2R1bGVzL0Zvcm0vZm9ybURhdGFIYW5kbGVyLmpzIiwid2VicGFjazovL3RvZG9fbGlzdC8uL3NyYy9tb2R1bGVzL0Zvcm0vZm9ybVVJLmpzIiwid2VicGFjazovL3RvZG9fbGlzdC8uL3NyYy9tb2R1bGVzL2ZhY3Rvcmllcy9wcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG9fbGlzdC8uL3NyYy9tb2R1bGVzL2ZhY3Rvcmllcy90b2RvLmpzIiwid2VicGFjazovL3RvZG9fbGlzdC8uL3NyYy9tb2R1bGVzL2FwcFN0YXRlTWFuYWdlci5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvbW9kdWxlcy9hcHBEYXRhLmpzIiwid2VicGFjazovL3RvZG9fbGlzdC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvbW9kdWxlcy9tZWRpYXRvci5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvbW9kdWxlcy9kYXRhTWFuYWdlci5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvbW9kdWxlcy9TaWRlbmF2L3NpZGVuYXYuanMiLCJ3ZWJwYWNrOi8vdG9kb19saXN0Ly4vc3JjL21vZHVsZXMvQXNpZGUvYXNpZGUuanMiLCJ3ZWJwYWNrOi8vdG9kb19saXN0Ly4vc3JjL21vZHVsZXMvTWFpbi9tYWluLmpzIiwid2VicGFjazovL3RvZG9fbGlzdC8uL3NyYy9tb2R1bGVzL0Zvcm0vZm9ybS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmNsYXNzIEFzaWRlVUkge1xuICAgIGNvbnN0cnVjdG9yKGFzaWRlKXtcbiAgICAgICAgdGhpcy5hc2lkZSA9IGFzaWRlO1xuICAgICAgICB0aGlzLmNsb3NlQXNpZGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xvc2VBc2lkZScpO1xuICAgICAgICB0aGlzLmFzaWRlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFzaWRlQ29udGFpbmVyJyk7XG4gICAgICAgIHRoaXMuZGVsZXRlVGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZWxldGVUYXNrJyk7XG4gICAgfVxuXG4gICAgbG9hZFVJKCl7XG4gICAgICAgIHRoaXMuY2xvc2VBc2lkZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VBc2lkZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmRlbGV0ZVRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlQXNpZGUoKTtcbiAgICAgICAgICAgIHRoaXMuYXNpZGUubWVkaWF0b3Iubm90aWZ5KHRoaXMuYXNpZGUsICdkZWxldGVUYXNrJywgdGhpcy5hc2lkZS5jdXJyVGFzayk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNsb3NlQXNpZGUoKXtcbiAgICAgICAgdGhpcy5hc2lkZUNvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcwcHgnO1xuICAgICAgICB0aGlzLmFzaWRlLm1lZGlhdG9yLm5vdGlmeSh0aGlzLmFzaWRlLCAnYXNpZGVDbG9zZWQnLCBudWxsKTtcbiAgICB9XG5cbiAgICBvcGVuQXNpZGUoKXtcbiAgICAgICAgdGhpcy5hc2lkZS5tZWRpYXRvci5ub3RpZnkodGhpcy5hc2lkZSwgJ2FzaWRlT3BlbmVkJywgbnVsbCk7XG4gICAgICAgIHRoaXMuYXNpZGVDb250YWluZXIuc3R5bGUud2lkdGggPSAnMjQwcHgnO1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFzaWRlVUk7IiwiXG5jbGFzcyBBc2lkZURPTSB7XG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgdGhpcy50YXNrVGl0bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tUaXRsZScpO1xuICAgICAgICB0aGlzLmNoZWNrbGlzdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hlY2tsaXN0Jyk7XG4gICAgICAgIHRoaXMuZHVlRGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHVlZGF0ZScpO1xuICAgICAgICB0aGlzLm5vdGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5vdGUnKTtcbiAgICAgICAgdGhpcy5jcmVhdGVEYXRlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGVEYXRlJyk7XG4gICAgICAgIHRoaXMucHJpb3JpdHlFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByaW9yaXR5Jyk7XG4gICAgfVxuXG4gICAgcmVuZGVyVGFza0luZm8odGFzayl7XG4gICAgICAgIHRoaXMudGFza1RpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHRhc2sudGl0bGU7XG4gICAgICAgIHRoaXMuZHVlRGF0ZUVsZW1lbnQudGV4dENvbnRlbnQgPSBgRHVlLURhdGU6ICR7dGFzay5kdWVEYXRlfWA7XG4gICAgICAgIHRoaXMubm90ZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0YXNrLm5vdGU7XG4gICAgICAgIHRoaXMucHJpb3JpdHlFbGVtZW50LnRleHRDb250ZW50ID0gYFByaW9yaXR5OiAke3Rhc2sucHJpb3JpdHl9YDtcbiAgICAgICAgdGhpcy5jcmVhdGVEYXRlRWxlbWVudC50ZXh0Q29udGVudCA9IGBDcmVhdGVkIG9uOiAke3Rhc2suY3JlYXRlRGF0ZX1gO1xuXG4gICAgICAgIHRoaXMuY2hlY2tsaXN0RWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICBcbiAgICAgICAgZm9yKGxldCBzdGVwIG9mIHRhc2suY2hlY2tsaXN0KXtcbiAgICAgICAgICAgIGxldCBsaXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICBsaXN0RWxlbWVudC50ZXh0Q29udGVudCA9IHN0ZXA7XG5cbiAgICAgICAgICAgIHRoaXMuY2hlY2tsaXN0RWxlbWVudC5hcHBlbmRDaGlsZChsaXN0RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBc2lkZURPTTsiLCJcblxuY2xhc3MgU2lkZW5hdkRPTSB7XG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgdGhpcy5kZWZhdWx0TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cy5kZWZhdWx0Jyk7XG4gICAgICAgIHRoaXMudXNlckxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdHMudXNlcicpO1xuICAgIH1cblxuICAgIGNyZWF0ZUVsZW1lbnQodHlwZSwgY2xhc3NMaXN0ID0gW10pe1xuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XG4gICAgICAgIFxuICAgICAgICBjbGFzc0xpc3QuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQodmFsdWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICBjcmVhdGVUaXRsZUVsZW1lbnQodGl0bGUpe1xuICAgICAgICBsZXQgdGl0bGVFbGVtZW50ID0gdGhpcy5jcmVhdGVFbGVtZW50KCdwJywgWyd0aXRsZSddKTtcbiAgICAgICAgdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGl0bGVFbGVtZW50O1xuICAgIH1cblxuICAgIGNyZWF0ZVRhc2tDb3VudGVyKGNvdW50KXtcbiAgICAgICAgbGV0IHRhc2tDb3VudGVyRWxlbWVudCA9IHRoaXMuY3JlYXRlRWxlbWVudCgncCcsIFsndGFza0NvdW50J10pO1xuICAgICAgICB0YXNrQ291bnRlckVsZW1lbnQudGV4dENvbnRlbnQgPSBjb3VudDtcblxuICAgICAgICByZXR1cm4gdGFza0NvdW50ZXJFbGVtZW50O1xuICAgIH1cblxuICAgIGNyZWF0ZVByb2plY3RJdGVtKHByb2plY3RJZCwgcHJvamVjdCl7XG4gICAgICAgIGxldCBwcm9qZWN0SXRlbSA9IHRoaXMuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgcHJvamVjdEl0ZW0uZGF0YXNldC51aWQgPSBwcm9qZWN0SWQ7XG5cbiAgICAgICAgcHJvamVjdEl0ZW0uYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUaXRsZUVsZW1lbnQocHJvamVjdC50aXRsZSkpO1xuXG4gICAgICAgIGlmKHByb2plY3QudG9kb0xpc3QubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICBwcm9qZWN0SXRlbS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRhc2tDb3VudGVyKHByb2plY3QudG9kb0xpc3QubGVuZ3RoKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcHJvamVjdEl0ZW07XG4gICAgfVxuXG4gICAgcmVuZGVyUHJvamVjdHMobGlzdCl7XG4gICAgICAgIHRoaXMuZGVmYXVsdExpc3QuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgdGhpcy51c2VyTGlzdC5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICBcbiAgICAgICAgZm9yKGxldCBbdWlkLCBwcm9qZWN0XSBvZiBsaXN0KXtcbiAgICAgICAgICAgIGxldCBwcm9qZWN0SXRlbSA9IHRoaXMuY3JlYXRlUHJvamVjdEl0ZW0odWlkLCBwcm9qZWN0KTtcblxuICAgICAgICAgICAgaWYocHJvamVjdC50eXBlID09PSAnZGVmYXVsdCcpe1xuICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdExpc3QuYXBwZW5kQ2hpbGQocHJvamVjdEl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXJMaXN0LmFwcGVuZENoaWxkKHByb2plY3RJdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNpZGVuYXZET007IiwiXG5cbmNsYXNzIFNpZGVuYXZVSSB7XG4gICAgY29uc3RydWN0b3IgKHNpZGVuYXYpe1xuICAgICAgICB0aGlzLnNpZGVuYXYgPSBzaWRlbmF2O1xuICAgICAgICB0aGlzLnNpZGVuYXZDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZW5hdkNvbnRhaW5lcicpO1xuICAgICAgICB0aGlzLmFkZFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkUHJvamVjdCcpO1xuICAgICAgICB0aGlzLmNsb3NlU2lkZW5hdkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjbG9zZVNpZGVuYXYnKTtcbiAgICAgICAgdGhpcy5vcGVuU2lkZW5hdkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvcGVuU2lkZW5hdicpO1xuICAgIH1cblxuICAgIGxvYWRVSSgpe1xuICAgICAgICB0aGlzLmFkZFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PntcbiAgICAgICAgICAgIHRoaXMuc2lkZW5hdi5tZWRpYXRvci5ub3RpZnkodGhpcy5zaWRlbmF2LCAnbmV3UHJvamVjdCcsIG51bGwpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY2xvc2VTaWRlbmF2QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZVNpZGVOYXYoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLm9wZW5TaWRlbmF2QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vcGVuU2lkZU5hdigpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZih3aW5kb3cuaW5uZXJXaWR0aCA+PSA4MDApe1xuICAgICAgICAgICAgICAgIHRoaXMuc2lkZW5hdkNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICB0aGlzLnNpZGVuYXZDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHVpZCA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2xpJyk/LmRhdGFzZXQudWlkO1xuICAgICAgICAgICAgaWYoIXVpZCkgcmV0dXJuO1xuICAgIFxuICAgICAgICAgICAgdGhpcy5zaWRlbmF2Lm1lZGlhdG9yLm5vdGlmeSh0aGlzLnNpZGVuYXYsICdwcm9qZWN0U2VsZWN0ZWQnLCB0aGlzLnNpZGVuYXYucHJvamVjdE1hcC5nZXQodWlkKSk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlU2lkZU5hdigpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvcGVuU2lkZU5hdigpe1xuICAgICAgICB0aGlzLnNpZGVuYXZDb250YWluZXIuc3R5bGUud2lkdGggPSAnMjQwcHgnO1xuICAgICAgICB0aGlzLnNpZGVuYXYubWVkaWF0b3Iubm90aWZ5KHRoaXMuc2lkZW5hdiwgJ3NpZGVuYXZPcGVuZWQnLCBudWxsKTtcbiAgICB9XG5cbiAgICBjbG9zZVNpZGVOYXYoKXtcbiAgICAgICAgdGhpcy5zaWRlbmF2Q29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgdGhpcy5zaWRlbmF2Lm1lZGlhdG9yLm5vdGlmeSh0aGlzLnNpZGVuYXYsICdzaWRlbmF2Q2xvc2VkJywgbnVsbCk7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgU2lkZW5hdlVJOyIsIlxuXG5jbGFzcyBNYWluVUkge1xuICAgIGNvbnN0cnVjdG9yKG1haW4pe1xuICAgICAgICB0aGlzLm1haW4gPSBtYWluO1xuICAgICAgICB0aGlzLnRhc2tMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tsaXN0Jyk7XG4gICAgICAgIHRoaXMuYWRkVGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGRUYXNrJyk7XG4gICAgICAgIHRoaXMuZGVsZXRlUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZWxldGVQcm9qZWN0Jyk7XG4gICAgfVxuXG4gICAgbG9hZFVJKCl7XG4gICAgICAgIHRoaXMuYWRkVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICB0aGlzLm1haW4ubWVkaWF0b3Iubm90aWZ5KHRoaXMubWFpbiwgJ25ld1Rhc2snLCB0aGlzLm1haW4uY3VyclByb2plY3QpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmRlbGV0ZVByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm1haW4ubWVkaWF0b3Iubm90aWZ5KHRoaXMubWFpbiwgJ2RlbGV0ZVByb2plY3QnLCB0aGlzLm1haW4uY3VyclByb2plY3QpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnRhc2tMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGxldCB1aWQgPSBlLnRhcmdldC5kYXRhc2V0LnVpZDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoIXVpZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLm1haW4ubWVkaWF0b3Iubm90aWZ5KHRoaXMubWFpbiwgJ3Rhc2tTZWxlY3RlZCcsIHRoaXMubWFpbi50YXNrTWFwLmdldCh1aWQpKTtcbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuXG5leHBvcnQgZGVmYXVsdCBNYWluVUk7IiwiXG5cbmNsYXNzIE1haW5ET00ge1xuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIHRoaXMudGFza2xpc3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza2xpc3QnKTtcbiAgICAgICAgdGhpcy50aXRsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdFRpdGxlJyk7XG4gICAgfVxuXG4gICAgY3JlYXRlVGFza0l0ZW0odGFza0lkLCB0YXNrTmFtZSl7XG4gICAgICAgIGxldCB0YXNrSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgIHRhc2tJdGVtLmRhdGFzZXQudWlkID0gdGFza0lkO1xuXG4gICAgICAgIHRhc2tJdGVtLnRleHRDb250ZW50ID0gdGFza05hbWU7XG5cbiAgICAgICAgcmV0dXJuIHRhc2tJdGVtO1xuICAgIH1cblxuXG4gICAgcmVuZGVyVGFza3MocHJvamVjdCwgdGFza2xpc3Qpe1xuICAgICAgICB0aGlzLnRhc2tsaXN0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG5cbiAgICAgICAgdGhpcy50aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBwcm9qZWN0LnRpdGxlO1xuICAgICAgICBcbiAgICAgICAgZm9yKGxldCBbdWlkLCB0YXNrXSBvZiB0YXNrbGlzdCl7XG4gICAgICAgICAgICBsZXQgdGFza0l0ZW0gPSB0aGlzLmNyZWF0ZVRhc2tJdGVtKHVpZCwgdGFzay50aXRsZSk7XG5cbiAgICAgICAgICAgIHRoaXMudGFza2xpc3RDb250YWluZXIuYXBwZW5kQ2hpbGQodGFza0l0ZW0pO1xuICAgICAgICB9ICAgICAgICBcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBNYWluRE9NOyIsIlxuY2xhc3MgRm9ybURhdGFIYW5kbGVyIHtcblxuICAgIHN0YXRpYyBnZXRQcm9qZWN0RGF0YSgpe1xuICAgICAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdFRpdGxlSW5wdXQnKS52YWx1ZTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7dGl0bGV9O1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRUb2RvRGF0YSgpe1xuICAgICAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFza1RpdGxlSW5wdXQnKS52YWx1ZTtcbiAgICAgICAgbGV0IGR1ZURhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZHVlZGF0ZUlucHV0JykudmFsdWU7XG4gICAgICAgIGxldCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eUlucHV0JykudmFsdWU7XG4gICAgICAgIGxldCBub3RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25vdGVJbnB1dCcpLnZhbHVlO1xuXG4gICAgICAgIHJldHVybiB7dGl0bGUsIGR1ZURhdGUsIHByaW9yaXR5LCBub3RlfTtcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBGb3JtRGF0YUhhbmRsZXI7IiwiXG5pbXBvcnQgRm9ybURhdGFIYW5kbGVyIGZyb20gXCIuL2Zvcm1EYXRhSGFuZGxlclwiO1xuXG5jbGFzcyBGb3JtVUkge1xuICAgIGNvbnN0cnVjdG9yKGZvcm0pe1xuICAgICAgICB0aGlzLmZvcm0gPSBmb3JtO1xuICAgICAgICB0aGlzLnByb2plY3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0TW9kYWwnKTtcbiAgICAgICAgdGhpcy50YXNrTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza01vZGFsJyk7XG4gICAgICAgIHRoaXMucHJvamVjdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdE1vZGFsIGZvcm0nKTtcbiAgICAgICAgdGhpcy50YXNrRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrTW9kYWwgZm9ybScpO1xuICAgICAgICB0aGlzLmNsb3NlRm9ybUJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b25bZGF0YS1hY3Rpb249XCJjbG9zZUZvcm1cIl0nKTtcbiAgICB9XG5cbiAgICBsb2FkVUkoKXtcbiAgICAgICAgdGhpcy5wcm9qZWN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgcHJvamVjdERhdGEgPSBGb3JtRGF0YUhhbmRsZXIuZ2V0UHJvamVjdERhdGEoKTtcbiAgICAgICAgICAgIHRoaXMucHJvamVjdEZvcm0ucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMuZm9ybS5tZWRpYXRvci5ub3RpZnkodGhpcy5mb3JtLCAnYWRkUHJvamVjdCcsIHByb2plY3REYXRhKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy50YXNrRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgdG9kb0RhdGEgPSBGb3JtRGF0YUhhbmRsZXIuZ2V0VG9kb0RhdGEoKTtcbiAgICAgICAgICAgIHRoaXMudGFza0Zvcm0ucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMuZm9ybS5tZWRpYXRvci5ub3RpZnkodGhpcy5mb3JtLCAnYWRkVGFzaycsIHRvZG9EYXRhKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jbG9zZUZvcm1CdG5zLmZvckVhY2goKGN1cnIpID0+IHtcbiAgICAgICAgICAgIGN1cnIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PntcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5jbG9zZXN0KCcubW9kYWxCb3gnKS5jbG9zZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNob3dQcm9qZWN0Rm9ybSgpe1xuICAgICAgICB0aGlzLnByb2plY3RNb2RhbC5zaG93TW9kYWwoKTtcbiAgICB9XG5cbiAgICBzaG93VGFza0Zvcm0oKXtcbiAgICAgICAgdGhpcy50YXNrTW9kYWwuc2hvd01vZGFsKCk7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgRm9ybVVJOyIsIlxuY2xhc3MgUHJvamVjdCB7XG4gICAgY29uc3RydWN0b3Ioe3RpdGxlID0gJycsIHRvZG9MaXN0ID0gW10sIHR5cGUgPSAndXNlcid9ID0ge30pe1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMudG9kb0xpc3QgPSB0b2RvTGlzdDtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB9XG5cbiAgICBhZGRUb2RvKHRvZG8pe1xuICAgICAgICB0aGlzLnRvZG9MaXN0LnB1c2godG9kbyk7XG4gICAgfVxuXG4gICAgcmVtb3ZlVG9kbyh0b2RvKXtcbiAgICAgICAgdGhpcy50b2RvTGlzdCA9IHRoaXMudG9kb0xpc3QuZmlsdGVyKChjdXJyKSA9PiB7cmV0dXJuIGN1cnIgIT09IHRvZG99KTtcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQcm9qZWN0OyIsIlxuY2xhc3MgU3RlcHtcbiAgICBjb25zdHJ1Y3Rvcih7dGl0bGUgPSAnJywgaXNDb21wbGV0ZSA9IGZhbHNlfSA9IHt9KXtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmlzQ29tcGxldGUgPSBpc0NvbXBsZXRlO1xuICAgIH1cbn07XG5cbmNsYXNzIFRvZG8ge1xuICAgIGNvbnN0cnVjdG9yKHt0aXRsZSA9ICcnLCBkdWVEYXRlID0gJycsIHByaW9yaXR5ID0gJycsIGNoZWNrbGlzdCA9IFtdLCBpc0NvbXBsZXRlID0gZmFsc2UsIG5vdGUgPSAnJywgY3JlYXRlRGF0ZSA9IG5ldyBEYXRlKCkudG9EYXRlU3RyaW5nKCl9ID0ge30pe1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgdGhpcy5jaGVja2xpc3QgPSBjaGVja2xpc3Q7XG4gICAgICAgIHRoaXMuaXNDb21wbGV0ZSA9IGlzQ29tcGxldGU7XG4gICAgICAgIHRoaXMubm90ZSA9IG5vdGU7XG4gICAgICAgIHRoaXMuY3JlYXRlRGF0ZSA9IGNyZWF0ZURhdGU7XG4gICAgfVxuXG4gICAgYWRkU3RlcChzdGVwKXtcbiAgICAgICAgdGhpcy5jaGVja2xpc3QucHVzaChzdGVwKTtcbiAgICB9XG5cbiAgICBjaGFuZ2VTdGF0dXMoKXtcbiAgICAgICAgdGhpcy5pc0NvbXBsZXRlID0gIXRoaXMuaXNDb21wbGV0ZTtcbiAgICB9XG5cbiAgICBjaGFuZ2VQcmlvcml0eShwcmlvcml0eSl7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICB9XG5cbiAgICBjaGFuZ2VEdWVEYXRlKGRhdGUpe1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkYXRlO1xuICAgIH1cbn07XG5cbmV4cG9ydCB7U3RlcCwgVG9kb307IiwiXG5jbGFzcyBBcHBTdGF0ZU1hbmFnZXJ7XG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgdGhpcy5tZWRpYXRvciA9IG51bGw7XG4gICAgICAgIHRoaXMuY3VyclByb2plY3RMaXN0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5jdXJyUHJvamVjdCA9IG51bGw7XG4gICAgICAgIHRoaXMuY3VyclRhc2sgPSBudWxsO1xuICAgIH1cblxuICAgIGdldEN1cnJQcm9qZWN0TGlzdCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyUHJvamVjdExpc3Q7XG4gICAgfVxuXG4gICAgZ2V0Q3VyclByb2plY3QoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VyclByb2plY3Q7XG4gICAgfVxuXG4gICAgZ2V0Q3VyclRhc2soKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VyclRhc2s7XG4gICAgfVxuXG4gICAgc2V0UHJvamVjdExpc3QocHJvamVjdExpc3Qpe1xuICAgICAgICB0aGlzLmN1cnJQcm9qZWN0TGlzdCA9IHByb2plY3RMaXN0O1xuICAgIH1cblxuICAgIHNldFByb2plY3QocHJvamVjdCl7XG4gICAgICAgIHRoaXMuY3VyclByb2plY3QgPSBwcm9qZWN0O1xuICAgIH1cblxuICAgIHNldFRhc2sodGFza2xpc3Qpe1xuICAgICAgICB0aGlzLmN1cnJUYXNrbGlzdCA9IHRhc2tsaXN0O1xuICAgIH1cblxuICAgIHNldE1lZGlhdG9yKG1lZGlhdG9yKXtcbiAgICAgICAgdGhpcy5tZWRpYXRvciA9IG1lZGlhdG9yO1xuICAgIH1cblxuICAgIHJlY2VpdmVOb3RpZmljYXRpb24oZXZlbnRUeXBlLCBkYXRhKXtcbiAgICAgICAgaWYoZXZlbnRUeXBlID09ICdwcm9qZWN0c0xvYWRlZCcpe1xuICAgICAgICAgICAgdGhpcy5jdXJyUHJvamVjdExpc3QgPSBkYXRhO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoZXZlbnRUeXBlID09ICdwcm9qZWN0U2VsZWN0ZWQnKXtcbiAgICAgICAgICAgIHRoaXMuY3VyclByb2plY3QgPSBkYXRhO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoZXZlbnRUeXBlID09ICd0YXNrU2VsZWN0ZWQnKXtcbiAgICAgICAgICAgIHRoaXMuY3VyclRhc2sgPSBkYXRhO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuY29uc3QgYXBwU3RhdGVNYW5hZ2VyID0gbmV3IEFwcFN0YXRlTWFuYWdlcigpO1xuXG5leHBvcnQgZGVmYXVsdCBhcHBTdGF0ZU1hbmFnZXI7IiwiaW1wb3J0IHsgVG9kbywgU3RlcCB9IGZyb20gXCIuL2ZhY3Rvcmllcy90b2RvXCI7XG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9mYWN0b3JpZXMvcHJvamVjdFwiO1xuXG5jb25zdCByYW5kb21EYXRhMSA9IHtcbiAgICB0aXRsZTogJ0NvbXBsZXRlIFByb2plY3QgUHJvcG9zYWwnLFxuICAgIGR1ZURhdGU6ICcyMDIzLTEyLTMxJyxcbiAgICBwcmlvcml0eTogJ0hpZ2gnLFxuICAgIGNoZWNrbGlzdDogWydSZXNlYXJjaCcsICdPdXRsaW5lJywgJ0RyYWZ0J10sXG4gICAgaXNDb21wbGV0ZTogZmFsc2UsXG4gICAgbm90ZTogJ0ltcG9ydGFudCBwcm9qZWN0IGZvciB0aGUgdXBjb21pbmcgZGVhZGxpbmUuJyxcbiAgICBjcmVhdGVEYXRlOiBuZXcgRGF0ZSgpLnRvRGF0ZVN0cmluZygpLFxufTtcbiAgXG5jb25zdCByYW5kb21EYXRhMiA9IHtcbiAgICB0aXRsZTogJ0J1eSBHcm9jZXJpZXMnLFxuICAgIGR1ZURhdGU6ICcyMDIzLTEyLTI1JyxcbiAgICBwcmlvcml0eTogJ01lZGl1bScsXG4gICAgY2hlY2tsaXN0OiBbJ01pbGsnLCAnQnJlYWQnLCAnRWdncycsICdGcnVpdHMnXSxcbiAgICBpc0NvbXBsZXRlOiBmYWxzZSxcbiAgICBub3RlOiAnRG9uXFwndCBmb3JnZXQgdG8gYnV5IGZyZXNoIHZlZ2V0YWJsZXMhJyxcbiAgICBjcmVhdGVEYXRlOiBuZXcgRGF0ZSgpLnRvRGF0ZVN0cmluZygpLFxufTtcbiAgXG5jb25zdCByYW5kb21EYXRhMyA9IHtcbiAgICB0aXRsZTogJ0d5bSBXb3Jrb3V0JyxcbiAgICBkdWVEYXRlOiAnMjAyMy0xMi0yOCcsXG4gICAgcHJpb3JpdHk6ICdMb3cnLFxuICAgIGNoZWNrbGlzdDogWydDYXJkaW8nLCAnV2VpZ2h0cycsICdTdHJldGNoaW5nJ10sXG4gICAgaXNDb21wbGV0ZTogZmFsc2UsXG4gICAgbm90ZTogJ0ZvY3VzIG9uIGxlZyBleGVyY2lzZXMgdG9kYXkuJyxcbiAgICBjcmVhdGVEYXRlOiBuZXcgRGF0ZSgpLnRvRGF0ZVN0cmluZygpLFxufTtcblxuY29uc3QgcmFuZG9tRGF0YTEwID0ge1xuICAgIHRpdGxlOiAnQm9vayBGbGlnaHQgVGlja2V0cycsXG4gICAgZHVlRGF0ZTogJzIwMjQtMDEtMTUnLFxuICAgIHByaW9yaXR5OiAnSGlnaCcsXG4gICAgY2hlY2tsaXN0OiBbJ0NoZWNrIHBhc3Nwb3J0JywgJ0Nob29zZSBzZWF0cycsICdDb25maXJtIGRhdGVzJ10sXG4gICAgaXNDb21wbGV0ZTogZmFsc2UsXG4gICAgbm90ZTogJ0NoZWNrIGZvciBhbnkgdHJhdmVsIHJlc3RyaWN0aW9ucyBkdWUgdG8gQ09WSUQtMTkuJyxcbiAgICBjcmVhdGVEYXRlOiBuZXcgRGF0ZSgpLnRvRGF0ZVN0cmluZygpLFxufTtcblxuY29uc3QgdG9kb0FycmF5ID0gW25ldyBUb2RvKHJhbmRvbURhdGExKSwgbmV3IFRvZG8ocmFuZG9tRGF0YTIpLCBuZXcgVG9kbyhyYW5kb21EYXRhMyksIG5ldyBUb2RvKHJhbmRvbURhdGExMCldO1xuXG5cbmxldCBkZWZhdWx0UHJvamVjdHMgPSBbbmV3IFByb2plY3Qoe3RpdGxlOiAnVG9kYXknLCB0eXBlOiAnZGVmYXVsdCd9KSwgbmV3IFByb2plY3Qoe3RpdGxlOiAnSW1wb3J0YW50JywgdHlwZTogJ2RlZmF1bHQnfSksIFxuICAgICAgICAgICAgICAgICAgICBuZXcgUHJvamVjdCh7dGl0bGU6ICdDb21wbGV0ZWQnLCB0eXBlOiAnZGVmYXVsdCd9KSwgbmV3IFByb2plY3Qoe3RpdGxlOiAnVGFza3MnLCB0b2RvTGlzdDogdG9kb0FycmF5LCB0eXBlOiAnZGVmYXVsdCd9KV07XG5cbmV4cG9ydCBkZWZhdWx0IGRlZmF1bHRQcm9qZWN0czsiLCJcbmltcG9ydCBBc2lkZSBmcm9tIFwiLi9tb2R1bGVzL0FzaWRlL2FzaWRlLmpzXCI7XG5pbXBvcnQgU2lkZW5hdiBmcm9tIFwiLi9tb2R1bGVzL1NpZGVuYXYvc2lkZW5hdi5qc1wiO1xuaW1wb3J0IE1haW4gZnJvbSBcIi4vbW9kdWxlcy9NYWluL21haW4uanNcIjtcbmltcG9ydCBNZWRpYXRvciBmcm9tIFwiLi9tb2R1bGVzL21lZGlhdG9yLmpzXCI7XG5pbXBvcnQgRm9ybSBmcm9tIFwiLi9tb2R1bGVzL0Zvcm0vZm9ybS5qc1wiO1xuaW1wb3J0IERhdGFNYW5hZ2VyIGZyb20gXCIuL21vZHVsZXMvZGF0YU1hbmFnZXIuanNcIjtcbmltcG9ydCBkZWZhdWx0UHJvamVjdHMgZnJvbSBcIi4vbW9kdWxlcy9hcHBEYXRhLmpzXCI7XG5pbXBvcnQgYXBwU3RhdGVNYW5hZ2VyIGZyb20gXCIuL21vZHVsZXMvYXBwU3RhdGVNYW5hZ2VyLmpzXCI7XG5cblxuY29uc3QgbWVkaWF0b3IgPSBuZXcgTWVkaWF0b3IoKTtcbmNvbnN0IGRhdGFNYW5hZ2VyID0gbmV3IERhdGFNYW5hZ2VyKCk7XG5cbmRlZmF1bHRQcm9qZWN0cy5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4gICAgZGF0YU1hbmFnZXIuYWRkUHJvamVjdChwcm9qZWN0KTtcbn0pO1xuXG5jb25zdCBzaWRlbmF2ID0gbmV3IFNpZGVuYXYoZGF0YU1hbmFnZXIuZ2V0UHJvamVjdHMoKSk7XG5jb25zdCBhc2lkZSA9IG5ldyBBc2lkZSgpO1xuY29uc3QgbWFpbiA9IG5ldyBNYWluKCk7XG5jb25zdCBmb3JtID0gbmV3IEZvcm0oKTtcblxubWVkaWF0b3IucmVnaXN0ZXIoc2lkZW5hdik7XG5tZWRpYXRvci5yZWdpc3RlcihtYWluKTtcbm1lZGlhdG9yLnJlZ2lzdGVyKGFzaWRlKTtcbm1lZGlhdG9yLnJlZ2lzdGVyKGZvcm0pO1xubWVkaWF0b3IucmVnaXN0ZXIoYXBwU3RhdGVNYW5hZ2VyKTtcbm1lZGlhdG9yLnJlZ2lzdGVyKGRhdGFNYW5hZ2VyKTtcblxuc2lkZW5hdi5pbml0KCk7XG5tYWluLmluaXQoKTtcbmFzaWRlLmluaXQoKTtcbmZvcm0uaW5pdCgpO1xuIiwiY2xhc3MgTWVkaWF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIHRoaXMuY29tcG9uZW50cyA9IG5ldyBTZXQoKTtcbiAgICB9XG5cbiAgICByZWdpc3Rlcihjb21wb25lbnQpe1xuICAgICAgICB0aGlzLmNvbXBvbmVudHMuYWRkKGNvbXBvbmVudCk7XG4gICAgICAgIGNvbXBvbmVudC5zZXRNZWRpYXRvcih0aGlzKTtcbiAgICB9XG5cbiAgICB1bnJlZ2lzdGVyKGNvbXBvbmVudCl7XG4gICAgICAgIHRoaXMuY29tcG9uZW50cy5kZWxldGUoY29tcG9uZW50KTtcbiAgICAgICAgY29tcG9uZW50LnNldE1lZGlhdG9yKG51bGwpO1xuICAgIH1cblxuICAgIG5vdGlmeShzZW5kZXIsIGV2ZW50VHlwZSwgZGF0YSl7XG4gICAgICAgIGNvbnNvbGUubG9nKGV2ZW50VHlwZSk7XG5cbiAgICAgICAgdGhpcy5jb21wb25lbnRzLmZvckVhY2goKGNvbXBvbmVudCkgPT4ge1xuICAgICAgICAgICAgaWYoY29tcG9uZW50ICE9PSBzZW5kZXIpe1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5yZWNlaXZlTm90aWZpY2F0aW9uKGV2ZW50VHlwZSwgZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IE1lZGlhdG9yOyIsImltcG9ydCBQcm9qZWN0IGZyb20gXCIuL2ZhY3Rvcmllcy9wcm9qZWN0XCI7XG5pbXBvcnQgeyBUb2RvLCBTdGVwIH0gZnJvbSBcIi4vZmFjdG9yaWVzL3RvZG9cIjtcbmltcG9ydCBhcHBTdGF0ZU1hbmFnZXIgZnJvbSBcIi4vYXBwU3RhdGVNYW5hZ2VyXCI7XG5cbmNsYXNzIERhdGFNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICB0aGlzLm1lZGlhdG9yID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcm9qZWN0TGlzdCA9IG5ldyBTZXQoKTtcbiAgICB9XG5cbiAgICBnZXRQcm9qZWN0cygpe1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9qZWN0TGlzdDtcbiAgICB9XG5cbiAgICBhZGRQcm9qZWN0KHByb2plY3Qpe1xuICAgICAgICB0aGlzLnByb2plY3RMaXN0LmFkZChwcm9qZWN0KTtcbiAgICB9XG5cbiAgICByZW1vdmVQcm9qZWN0KHByb2plY3Qpe1xuICAgICAgICB0aGlzLnByb2plY3RMaXN0LmRlbGV0ZShwcm9qZWN0KTtcbiAgICB9XG5cbiAgICBzZXRNZWRpYXRvcihtZWRpYXRvcil7XG4gICAgICAgIHRoaXMubWVkaWF0b3IgPSBtZWRpYXRvcjtcbiAgICB9XG5cbiAgICByZWNlaXZlTm90aWZpY2F0aW9uKGV2ZW50VHlwZSwgZGF0YSl7XG4gICAgICAgIGlmKGV2ZW50VHlwZSA9PSAnYWRkUHJvamVjdCcpe1xuICAgICAgICAgICAgdGhpcy5hZGRQcm9qZWN0KG5ldyBQcm9qZWN0KGRhdGEpKTtcbiAgICAgICAgICAgIHRoaXMubWVkaWF0b3Iubm90aWZ5KHRoaXMsICdwcm9qZWN0QWRkZWQnLCBudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGV2ZW50VHlwZSA9PSAnZGVsZXRlUHJvamVjdCcpe1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVQcm9qZWN0KGRhdGEpO1xuICAgICAgICAgICAgdGhpcy5tZWRpYXRvci5ub3RpZnkodGhpcywgJ3Byb2plY3REZWxldGVkJywgbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZihldmVudFR5cGUgPT0gJ2FkZFRhc2snKXtcbiAgICAgICAgICAgIGFwcFN0YXRlTWFuYWdlci5jdXJyUHJvamVjdC5hZGRUb2RvKG5ldyBUb2RvKGRhdGEpKTsgIFxuICAgICAgICAgICAgdGhpcy5tZWRpYXRvci5ub3RpZnkodGhpcywgJ3Rhc2tBZGRlZCcsIG51bGwpOyAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBpZihldmVudFR5cGUgPT0gJ2RlbGV0ZVRhc2snKXtcbiAgICAgICAgICAgIGFwcFN0YXRlTWFuYWdlci5jdXJyUHJvamVjdC5yZW1vdmVUb2RvKGRhdGEpO1xuICAgICAgICAgICAgdGhpcy5tZWRpYXRvci5ub3RpZnkodGhpcywgJ3Rhc2tEZWxldGVkJywgbnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBEYXRhTWFuYWdlcjsiLCJpbXBvcnQgU2lkZW5hdkRPTSBmcm9tIFwiLi9zaWRlbmF2RE9NLmpzXCI7XG5pbXBvcnQgU2lkZW5hdlVJIGZyb20gXCIuL3NpZGVuYXZVSS5qc1wiO1xuXG5jbGFzcyBTaWRlbmF2IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9qZWN0TGlzdCl7XG4gICAgICAgIHRoaXMubWVkaWF0b3IgPSBudWxsO1xuICAgICAgICB0aGlzLnByb2plY3RNYXAgPSBuZXcgTWFwKCk7XG5cbiAgICAgICAgdGhpcy5wcm9qZWN0TGlzdCA9IHByb2plY3RMaXN0O1xuICAgICAgICB0aGlzLnNpZGVuYXZET00gPSBuZXcgU2lkZW5hdkRPTSgpO1xuICAgICAgICB0aGlzLnNpZGVuYXZVSSA9IG5ldyBTaWRlbmF2VUkodGhpcyk7XG4gICAgfVxuXG4gICAgaW5pdCgpe1xuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgdGhpcy5zaWRlbmF2VUkubG9hZFVJKCk7XG4gICAgICAgIHRoaXMuc2VsZWN0RGVmYXVsdFByb2plY3QoKTtcbiAgICB9XG5cbiAgICBsb2FkUHJvamVjdExpc3REYXRhKCl7XG4gICAgICAgIHRoaXMucHJvamVjdE1hcC5jbGVhcigpO1xuXG4gICAgICAgIGZvcihsZXQgcHJvamVjdCBvZiB0aGlzLnByb2plY3RMaXN0KXtcbiAgICAgICAgICAgIHRoaXMucHJvamVjdE1hcC5zZXQodGhpcy5nZXRVSUQoKSwgcHJvamVjdCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZWxlY3REZWZhdWx0UHJvamVjdCgpe1xuICAgICAgICB0aGlzLm1lZGlhdG9yLm5vdGlmeSh0aGlzLCAncHJvamVjdFNlbGVjdGVkJywgdGhpcy5wcm9qZWN0TWFwLnZhbHVlcygpLm5leHQoKS52YWx1ZSk7XG4gICAgfVxuXG4gICAgcmVmcmVzaCgpe1xuICAgICAgICB0aGlzLmxvYWRQcm9qZWN0TGlzdERhdGEoKTtcbiAgICAgICAgdGhpcy5zaWRlbmF2RE9NLnJlbmRlclByb2plY3RzKHRoaXMucHJvamVjdE1hcCk7XG4gICAgICAgIHRoaXMubWVkaWF0b3Iubm90aWZ5KHRoaXMsICdwcm9qZWN0c0xvYWRlZCcsIHRoaXMucHJvamVjdExpc3QpO1xuICAgIH1cblxuICAgIHNldE1lZGlhdG9yKG1lZGlhdG9yKXtcbiAgICAgICAgdGhpcy5tZWRpYXRvciA9IG1lZGlhdG9yO1xuICAgIH0gIFxuXG4gICAgcmVjZWl2ZU5vdGlmaWNhdGlvbihldmVudFR5cGUsIGRhdGEpe1xuICAgICAgICBpZihldmVudFR5cGUgPT0gJ2FzaWRlT3BlbmVkJyl7XG4gICAgICAgICAgICB0aGlzLnNpZGVuYXZVSS5jbG9zZVNpZGVOYXYoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGV2ZW50VHlwZSA9PSAncHJvamVjdEFkZGVkJyB8fCBldmVudFR5cGUgPT0gJ3Rhc2tBZGRlZCcgfHwgZXZlbnRUeXBlID09ICd0YXNrRGVsZXRlZCcpe1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZihldmVudFR5cGUgPT0gJ3Byb2plY3REZWxldGVkJyl7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVmYXVsdFByb2plY3QoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFVJRCgpe1xuICAgICAgICBsZXQgcmFuZG9tTnVtID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMWU5KTtcbiAgICAgICAgcmV0dXJuIHJhbmRvbU51bS50b1N0cmluZygzNik7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgU2lkZW5hdjsiLCJpbXBvcnQgQXNpZGVVSSBmcm9tIFwiLi9hc2lkZVVJLmpzXCI7XG5pbXBvcnQgQXNpZGVET00gZnJvbSBcIi4vYXNpZGVET00uanNcIjtcblxuXG5jbGFzcyBBc2lkZSB7XG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgdGhpcy5jdXJyVGFzayA9IG51bGw7XG4gICAgICAgIHRoaXMubWVkaWF0b3IgPSBudWxsO1xuICAgICAgICB0aGlzLmFzaWRlVUkgPSBuZXcgQXNpZGVVSSh0aGlzKTtcbiAgICAgICAgdGhpcy5hc2lkZURPTSA9IG5ldyBBc2lkZURPTSgpO1xuICAgIH1cblxuICAgIGluaXQoKXtcbiAgICAgICAgdGhpcy5hc2lkZVVJLmxvYWRVSSgpO1xuICAgIH1cblxuICAgIHJlZnJlc2goKXtcbiAgICAgICAgdGhpcy5hc2lkZURPTS5yZW5kZXJUYXNrSW5mbyh0aGlzLmN1cnJUYXNrKTtcbiAgICB9XG5cbiAgICBzaG93VGFza0luZm8oKXtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIHRoaXMuYXNpZGVVSS5vcGVuQXNpZGUoKTtcbiAgICB9XG5cbiAgICBzZXRDdXJyVGFzayh0YXNrKXtcbiAgICAgICAgdGhpcy5jdXJyVGFzayA9IHRhc2s7XG4gICAgfVxuXG4gICAgc2V0TWVkaWF0b3IobWVkaWF0b3Ipe1xuICAgICAgICB0aGlzLm1lZGlhdG9yID0gbWVkaWF0b3I7XG4gICAgfVxuXG4gICAgcmVjZWl2ZU5vdGlmaWNhdGlvbihldmVudFR5cGUsIGRhdGEpe1xuICAgICAgICBpZihldmVudFR5cGUgPT0gJ3Rhc2tTZWxlY3RlZCcpe1xuICAgICAgICAgICAgdGhpcy5zZXRDdXJyVGFzayhkYXRhKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd1Rhc2tJbmZvKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZihldmVudFR5cGUgPT0gJ3NpZGVuYXZPcGVuZWQnIHx8IGV2ZW50VHlwZSA9PSAncHJvamVjdFNlbGVjdGVkJyl7XG4gICAgICAgICAgICB0aGlzLmFzaWRlVUkuY2xvc2VBc2lkZSgpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgQXNpZGU7IiwiaW1wb3J0IE1haW5VSSBmcm9tIFwiLi9tYWluVUkuanNcIjtcbmltcG9ydCBNYWluRE9NIGZyb20gXCIuL21haW5ET00uanNcIjtcblxuY2xhc3MgTWFpbiB7XG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgdGhpcy5jdXJyUHJvamVjdCA9IG51bGw7XG4gICAgICAgIHRoaXMudGFza01hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5tZWRpYXRvciA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5tYWluVUkgPSBuZXcgTWFpblVJKHRoaXMpO1xuICAgICAgICB0aGlzLm1haW5ET00gPSBuZXcgTWFpbkRPTSgpO1xuICAgIH1cblxuICAgIGluaXQoKXtcbiAgICAgICAgdGhpcy5tYWluVUkubG9hZFVJKCk7XG4gICAgfVxuXG4gICAgcmVmcmVzaCgpe1xuICAgICAgICB0aGlzLmxvYWRQcm9qZWN0RGF0YSgpO1xuICAgICAgICB0aGlzLm1haW5ET00ucmVuZGVyVGFza3ModGhpcy5jdXJyUHJvamVjdCwgdGhpcy50YXNrTWFwKTtcbiAgICB9XG5cbiAgICBsb2FkUHJvamVjdERhdGEoKXtcbiAgICAgICAgdGhpcy50YXNrTWFwLmNsZWFyKCk7XG5cbiAgICAgICAgbGV0IHRvZG9MaXN0ID0gdGhpcy5jdXJyUHJvamVjdC50b2RvTGlzdDtcbiAgICAgICAgdG9kb0xpc3QuZm9yRWFjaCgodG9kbykgPT4ge1xuICAgICAgICAgICAgdGhpcy50YXNrTWFwLnNldCh0aGlzLmdldFVJRCgpLCB0b2RvKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0VUlEKCl7XG4gICAgICAgIGxldCByYW5kb21OdW0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxZTkpO1xuICAgICAgICByZXR1cm4gcmFuZG9tTnVtLnRvU3RyaW5nKDM2KTtcbiAgICB9XG5cbiAgICBzZXRNZWRpYXRvcihtZWRpYXRvcil7XG4gICAgICAgIHRoaXMubWVkaWF0b3IgPSBtZWRpYXRvcjtcbiAgICB9XG5cbiAgICByZWNlaXZlTm90aWZpY2F0aW9uKGV2ZW50VHlwZSwgZGF0YSl7XG4gICAgICAgIGlmKGV2ZW50VHlwZSA9PSAncHJvamVjdFNlbGVjdGVkJyl7XG4gICAgICAgICAgICB0aGlzLmN1cnJQcm9qZWN0ID0gZGF0YTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoZXZlbnRUeXBlID09ICd0YXNrQWRkZWQnKXtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoZXZlbnRUeXBlID09ICd0YXNrRGVsZXRlZCcpe1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBNYWluOyIsImltcG9ydCBGb3JtVUkgZnJvbSBcIi4vZm9ybVVJLmpzXCI7XG5cbmNsYXNzIEZvcm0ge1xuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIHRoaXMuZm9ybVVJID0gbmV3IEZvcm1VSSh0aGlzKTtcbiAgICAgICAgdGhpcy5tZWRpYXRvciA9IG51bGw7XG4gICAgfVxuXG4gICAgaW5pdCgpe1xuICAgICAgICB0aGlzLmZvcm1VSS5sb2FkVUkoKTtcbiAgICB9XG5cbiAgICBzZXRNZWRpYXRvcihtZWRpYXRvcil7XG4gICAgICAgIHRoaXMubWVkaWF0b3IgPSBtZWRpYXRvcjtcbiAgICB9XG5cbiAgICByZWNlaXZlTm90aWZpY2F0aW9uKGV2ZW50VHlwZSwgZGF0YSl7XG4gICAgICAgIGlmKGV2ZW50VHlwZSA9PSAnbmV3UHJvamVjdCcpe1xuICAgICAgICAgICAgdGhpcy5mb3JtVUkuc2hvd1Byb2plY3RGb3JtKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZihldmVudFR5cGUgPT0gJ25ld1Rhc2snKXtcbiAgICAgICAgICAgIHRoaXMuZm9ybVVJLnNob3dUYXNrRm9ybSgpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgRm9ybTsiXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJhc2lkZSIsInRoaXMiLCJjbG9zZUFzaWRlQnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYXNpZGVDb250YWluZXIiLCJkZWxldGVUYXNrQnRuIiwibG9hZFVJIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsb3NlQXNpZGUiLCJtZWRpYXRvciIsIm5vdGlmeSIsImN1cnJUYXNrIiwic3R5bGUiLCJ3aWR0aCIsIm9wZW5Bc2lkZSIsInRhc2tUaXRsZUVsZW1lbnQiLCJjaGVja2xpc3RFbGVtZW50IiwiZHVlRGF0ZUVsZW1lbnQiLCJub3RlRWxlbWVudCIsImNyZWF0ZURhdGVFbGVtZW50IiwicHJpb3JpdHlFbGVtZW50IiwicmVuZGVyVGFza0luZm8iLCJ0YXNrIiwidGV4dENvbnRlbnQiLCJ0aXRsZSIsImR1ZURhdGUiLCJub3RlIiwicHJpb3JpdHkiLCJjcmVhdGVEYXRlIiwiaW5uZXJIVE1MIiwic3RlcCIsImNoZWNrbGlzdCIsImxpc3RFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiZGVmYXVsdExpc3QiLCJ1c2VyTGlzdCIsInR5cGUiLCJjbGFzc0xpc3QiLCJlbGVtZW50IiwiZm9yRWFjaCIsInZhbHVlIiwiYWRkIiwiY3JlYXRlVGl0bGVFbGVtZW50IiwidGl0bGVFbGVtZW50IiwiY3JlYXRlVGFza0NvdW50ZXIiLCJjb3VudCIsInRhc2tDb3VudGVyRWxlbWVudCIsImNyZWF0ZVByb2plY3RJdGVtIiwicHJvamVjdElkIiwicHJvamVjdCIsInByb2plY3RJdGVtIiwiZGF0YXNldCIsInVpZCIsInRvZG9MaXN0IiwibGVuZ3RoIiwicmVuZGVyUHJvamVjdHMiLCJsaXN0Iiwic2lkZW5hdiIsInNpZGVuYXZDb250YWluZXIiLCJhZGRQcm9qZWN0QnRuIiwiY2xvc2VTaWRlbmF2QnRuIiwib3BlblNpZGVuYXZCdG4iLCJlIiwiY2xvc2VTaWRlTmF2Iiwib3BlblNpZGVOYXYiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwicmVtb3ZlQXR0cmlidXRlIiwidGFyZ2V0IiwiY2xvc2VzdCIsInByb2plY3RNYXAiLCJnZXQiLCJtYWluIiwidGFza0xpc3QiLCJhZGRUYXNrQnRuIiwiZGVsZXRlUHJvamVjdEJ0biIsImN1cnJQcm9qZWN0IiwidGFza01hcCIsInRhc2tsaXN0Q29udGFpbmVyIiwiY3JlYXRlVGFza0l0ZW0iLCJ0YXNrSWQiLCJ0YXNrTmFtZSIsInRhc2tJdGVtIiwicmVuZGVyVGFza3MiLCJ0YXNrbGlzdCIsImdldFByb2plY3REYXRhIiwiZ2V0VG9kb0RhdGEiLCJmb3JtIiwicHJvamVjdE1vZGFsIiwidGFza01vZGFsIiwicHJvamVjdEZvcm0iLCJ0YXNrRm9ybSIsImNsb3NlRm9ybUJ0bnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicHJvamVjdERhdGEiLCJyZXNldCIsInRvZG9EYXRhIiwiY3VyciIsImNsb3NlIiwic2hvd1Byb2plY3RGb3JtIiwic2hvd01vZGFsIiwic2hvd1Rhc2tGb3JtIiwiYWRkVG9kbyIsInRvZG8iLCJwdXNoIiwicmVtb3ZlVG9kbyIsImZpbHRlciIsIlRvZG8iLCJpc0NvbXBsZXRlIiwiRGF0ZSIsInRvRGF0ZVN0cmluZyIsImFkZFN0ZXAiLCJjaGFuZ2VTdGF0dXMiLCJjaGFuZ2VQcmlvcml0eSIsImNoYW5nZUR1ZURhdGUiLCJkYXRlIiwiYXBwU3RhdGVNYW5hZ2VyIiwiY3VyclByb2plY3RMaXN0IiwiZ2V0Q3VyclByb2plY3RMaXN0IiwiZ2V0Q3VyclByb2plY3QiLCJnZXRDdXJyVGFzayIsInNldFByb2plY3RMaXN0IiwicHJvamVjdExpc3QiLCJzZXRQcm9qZWN0Iiwic2V0VGFzayIsImN1cnJUYXNrbGlzdCIsInNldE1lZGlhdG9yIiwicmVjZWl2ZU5vdGlmaWNhdGlvbiIsImV2ZW50VHlwZSIsImRhdGEiLCJyYW5kb21EYXRhMSIsInJhbmRvbURhdGEyIiwicmFuZG9tRGF0YTMiLCJyYW5kb21EYXRhMTAiLCJ0b2RvQXJyYXkiLCJjb21wb25lbnRzIiwiU2V0IiwicmVnaXN0ZXIiLCJjb21wb25lbnQiLCJ1bnJlZ2lzdGVyIiwiZGVsZXRlIiwic2VuZGVyIiwiY29uc29sZSIsImxvZyIsImdldFByb2plY3RzIiwiYWRkUHJvamVjdCIsInJlbW92ZVByb2plY3QiLCJNYXAiLCJzaWRlbmF2RE9NIiwic2lkZW5hdlVJIiwiaW5pdCIsInJlZnJlc2giLCJzZWxlY3REZWZhdWx0UHJvamVjdCIsImxvYWRQcm9qZWN0TGlzdERhdGEiLCJjbGVhciIsInNldCIsImdldFVJRCIsInZhbHVlcyIsIm5leHQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0b1N0cmluZyIsImFzaWRlVUkiLCJhc2lkZURPTSIsInNob3dUYXNrSW5mbyIsInNldEN1cnJUYXNrIiwibWFpblVJIiwibWFpbkRPTSIsImxvYWRQcm9qZWN0RGF0YSIsImZvcm1VSSJdLCJzb3VyY2VSb290IjoiIn0=