(()=>{"use strict";const t=class{constructor(t){this.aside=t,this.closeAsideBtn=document.querySelector(".closeAside"),this.asideContainer=document.querySelector(".asideContainer")}loadUI(){this.closeAsideBtn.addEventListener("click",(()=>{this.closeAside()}))}closeAside(){this.asideContainer.style.width="0px",this.aside.mediator.notify(this.aside,"asideClosed",null)}openAside(){this.aside.mediator.notify(this.aside,"asideOpened",null),this.asideContainer.style.width="240px"}},e=class{constructor(){this.taskTitleElement=document.querySelector(".taskTitle"),this.checklistElement=document.querySelector(".checklist"),this.dueDateElement=document.querySelector(".duedate"),this.noteElement=document.querySelector(".note"),this.createDateElement=document.querySelector(".createDate"),this.priorityElement=document.querySelector(".priority")}renderTaskInfo(t){this.taskTitleElement.textContent=t.title,this.dueDateElement.textContent=t.dueDate,this.noteElement.textContent=t.note,this.priorityElement.textContent=t.priority,this.createDateElement.textContent=t.createDate,this.checklistElement.innerHTML="";for(let e of t.checklist){let t=document.createElement("li");t.textContent=e.title,this.checklistElement.appendChild(t)}}},s=class{constructor(){this.defaultList=document.querySelector(".projects.default"),this.userList=document.querySelector(".projects.user")}createElement(t,e=[]){let s=document.createElement(t);return e.forEach((t=>{s.classList.add(t)})),s}createTitleElement(t){let e=this.createElement("p",["title"]);return e.textContent=t,e}createTaskCounter(t){let e=this.createElement("p",["taskCount"]);return e.textContent=t,e}createProjectItem(t,e){let s=this.createElement("li");return s.dataset.uid=t,s.appendChild(this.createTitleElement(e.title)),e.todoList.length>0&&s.appendChild(this.createTaskCounter(e.todoList.length)),s}renderProjects(t){this.defaultList.innerHTML="",this.userList.innerHTML="";for(let[e,s]of t){let t=this.createProjectItem(e,s);"default"===s.type?this.defaultList.appendChild(t):this.userList.appendChild(t)}}},i=class{constructor(t){this.sidenav=t,this.sidenavContainer=document.querySelector(".sidenavContainer"),this.addProjectBtn=document.querySelector("#addProject"),this.closeSidenavBtn=document.querySelector("#closeSidenav"),this.openSidenavBtn=document.querySelector("#openSidenav")}loadUI(){this.addProjectBtn.addEventListener("click",(t=>{this.sidenav.mediator.notify(this.sidenav,"newProject",this.sidenav.projectList)})),this.closeSidenavBtn.addEventListener("click",(()=>{this.closeSideNav()})),this.openSidenavBtn.addEventListener("click",(()=>{this.openSideNav()})),window.addEventListener("resize",(()=>{window.innerWidth>=800&&this.sidenavContainer.removeAttribute("style")})),this.sidenavContainer.addEventListener("click",(t=>{let e=t.target.closest("li")?.dataset.uid;e&&(this.sidenav.mediator.notify(this.sidenav,"projectSelected",this.sidenav.projectList.get(e)),this.closeSideNav())}))}openSideNav(){this.sidenavContainer.style.width="240px",this.sidenav.mediator.notify(this.sidenav,"sidenavOpened",null)}closeSideNav(){this.sidenavContainer.removeAttribute("style"),this.sidenav.mediator.notify(this.sidenav,"sidenavClosed",null)}},r=class{constructor(t){this.main=t,this.taskList=document.querySelector(".tasklist"),this.addTaskBtn=document.querySelector(".addTask")}loadUI(){this.addTaskBtn.addEventListener("click",(()=>{this.main.mediator.notify(this.main,"newTask",this.main.currProject)})),this.taskList.addEventListener("click",(t=>{let e=t.target.dataset.uid;e&&this.main.mediator.notify(this.main,"taskSelected",this.main.taskMap.get(e))}))}},o=class{constructor(){this.tasklistContainer=document.querySelector(".tasklist"),this.titleElement=document.querySelector(".projectTitle")}createTaskItem(t,e){let s=document.createElement("li");return s.dataset.uid=t,s.textContent=e,s}renderTasks(t,e){this.tasklistContainer.innerHTML="",this.titleElement.textContent=t.title;for(let[t,s]of e){let e=this.createTaskItem(t,s.title);this.tasklistContainer.appendChild(e)}}},n=class{constructor(t){this.form=t,this.projectModal=document.querySelector(".projectModal"),this.taskModal=document.querySelector(".taskModal"),this.projectForm=document.querySelector(".projectModal form"),this.taskForm=document.querySelector(".taskModal form"),this.closeFormBtns=document.querySelectorAll('button[data-action="closeForm"]')}loadUI(){this.projectForm.addEventListener("submit",(()=>{this.form.formDataHandler.handleData("project"),this.projectForm.reset(),this.form.mediator.notify(this.form,"projectAdded",null)})),this.taskForm.addEventListener("submit",(()=>{this.form.formDataHandler.handleData("task"),this.taskForm.reset(),this.form.mediator.notify(this.form,"taskAdded",null)})),this.closeFormBtns.forEach((t=>{t.addEventListener("click",(t=>{t.target.closest(".modalBox").close()}))}))}showProjectForm(){this.projectModal.showModal()}showTaskForm(){this.taskModal.showModal()}},a=class{constructor(t="",e=[],s="user"){this.title=t,this.todoList=e,this.type=s}addTodo(t){this.todoList.push(t)}removeTodo(t){this.todoList=this.todoList.filter((t=>{}))}};class c{constructor(t="",e=!1){this.title=t,this.isComplete=e}}class d{constructor(t="",e="",s="",i=[],r=!1,o=""){this.title=t,this.dueDate=e,this.priority=s,this.checklist=i,this.isComplete=r,this.note=o,this.createDate=(new Date).toDateString()}addStep(t){this.checklist.push(t)}changeStatus(){this.isComplete=!this.isComplete}changePriority(t){this.priority=t}changeDueDate(t){this.dueDate=t}}const l=new class{constructor(){this.mediator=null,this.currProjectList=null,this.currProject=null,this.currTask=null}getCurrProjectList(){return this.currProjectList}getCurrProject(){return this.currProject}getCurrTask(){return this.currTask}setProjectList(t){this.currProjectList=t}setProject(t){this.currProject=t}setTask(t){this.currTasklist=t}setMediator(t){this.mediator=t}receiveNotification(t,e){"projectsLoaded"==t?this.currProjectList=e:"projectSelected"==t?this.currProject=e:"taskSelected"==t&&(this.currTask=e)}},h=l,u=class{handleData(t){"project"==t?this.createNewProject():"task"==t&&this.createNewTask()}createNewProject(){let t=document.querySelector("#projectTitleInput").value,e=new a(t);h.currProjectList.set(this.getUID(),e)}createNewTask(){let t=document.querySelector("#taskTitleInput").value,e=document.querySelector("#duedateInput").value,s=document.querySelector("#priorityInput").value,i=document.querySelector("#noteInput").value,r=new d(t,e,s,[],!1,i);h.currProject.addTodo(r)}getUID(){return Math.floor(1e9*Math.random()).toString(36)}},m=[new d("Task 1","2023-12-20","High",[new c("Step 1",!1),new c("Step 2",!0)],!1),new d("Task 2","2023-12-21","Medium",[new c("Step 1",!1),new c("Step 2",!0)],!1),new d("Task 3","2023-12-22","Low",[new c("Step 1",!1),new c("Step 2"),!0],!0),new d("Task 4","2023-12-23","High",[new c("Step 1",!1),new c("Step 2"),!0],!1),new d("Task 5","2023-12-24","Medium",[new c("Step 1",!1),new c("Step 2"),!0],!1),new d("Task 6","2023-12-25","Low",[new c("Step 1",!1),new c("Step 2"),!0],!0),new d("Task 7","2023-12-26","High",[new c("Step 1",!1),new c("Step 2"),!0],!1),new d("Task 8","2023-12-27","Medium",[new c("Step 1",!1),new c("Step 2"),!0],!1),new d("Task 9","2023-12-28","Low",[new c("Step 1",!1),new c("Step 2"),!0],!0),new d("Task 10","2023-12-29","High",[new c("Step 1",!1),new c("Step 2"),!0],!1)];let p=[new a("Today",[],"default"),new a("Important",[],"default"),new a("Completed",[],"default"),new a("Tasks",m,"default")];const k=new class{constructor(t){this.ProjectList=new Map,this.init(t)}init(t){t.forEach((t=>{this.ProjectList.set(this.getUID(),t)}))}addProject(t,e){let s=new a(t,e);this.ProjectList.set(this.getUID(),s)}getUID(){return Math.floor(1e9*Math.random()).toString(36)}}(p),w=new class{constructor(){this.components=new Set}register(t){this.components.add(t),t.setMediator(this)}unregister(t){this.components.delete(t),t.setMediator(null)}notify(t,e,s){console.log(e),this.components.forEach((i=>{i!==t&&i.receiveNotification(e,s)}))}},S=new class{constructor(t){this.mediator=null,this.projectList=t,this.sidenavDOM=new s,this.sidenavUI=new i(this)}selectDefaultProject(){this.mediator.notify(this,"projectSelected",this.projectList.values().next().value)}init(){this.sidenavDOM.renderProjects(this.projectList),this.mediator.notify(this,"projectsLoaded",this.projectList),this.sidenavUI.loadUI(),this.selectDefaultProject()}refresh(){this.sidenavDOM.renderProjects(this.projectList),this.mediator.notify(this,"projectsLoaded",this.projectList)}setMediator(t){this.mediator=t}receiveNotification(t,e){"asideOpened"==t&&this.sidenavUI.closeSideNav(),"projectAdded"!=t&&"taskAdded"!=t||this.refresh()}}(k.ProjectList),f=new class{constructor(){this.currTask=null,this.mediator=null,this.asideUI=new t(this),this.asideDOM=new e}init(){this.asideUI.loadUI()}refresh(){this.asideDOM.renderTaskInfo(this.currTask)}showTaskInfo(){this.refresh(),this.asideUI.openAside()}setCurrTask(t){this.currTask=t}setMediator(t){this.mediator=t}receiveNotification(t,e){"taskSelected"==t&&(this.setCurrTask(e),this.showTaskInfo()),"sidenavOpened"!=t&&"projectSelected"!=t||this.asideUI.closeAside()}},j=new class{constructor(){this.currProject=null,this.taskMap=new Map,this.mediator=null,this.mainUI=new r(this),this.mainDOM=new o}init(){this.mainUI.loadUI()}refresh(){this.loadProjectData(),this.mainDOM.renderTasks(this.currProject,this.taskMap)}loadProjectData(){this.taskMap.clear(),this.currProject.todoList.forEach((t=>{this.taskMap.set(this.getUID(),t)}))}getUID(){return Math.floor(1e9*Math.random()).toString(36)}setMediator(t){this.mediator=t}receiveNotification(t,e){"projectSelected"==t&&(this.currProject=e,this.refresh()),"taskAdded"==t&&this.refresh()}},v=new class{constructor(){this.formUI=new n(this),this.formDataHandler=new u,this.mediator=null}init(){this.formUI.loadUI()}setMediator(t){this.mediator=t}receiveNotification(t,e){"newProject"==t&&this.formUI.showProjectForm(),"newTask"==t&&this.formUI.showTaskForm()}};w.register(S),w.register(j),w.register(f),w.register(v),w.register(h),S.init(),j.init(),f.init(),v.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aXN0Ly4vc3JjL21vZHVsZXMvQXNpZGUvYXNpZGVVSS5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvbW9kdWxlcy9Bc2lkZS9hc2lkZURPTS5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvbW9kdWxlcy9TaWRlbmF2L3NpZGVuYXZET00uanMiLCJ3ZWJwYWNrOi8vdG9kb19saXN0Ly4vc3JjL21vZHVsZXMvU2lkZW5hdi9zaWRlbmF2VUkuanMiLCJ3ZWJwYWNrOi8vdG9kb19saXN0Ly4vc3JjL21vZHVsZXMvTWFpbi9tYWluVUkuanMiLCJ3ZWJwYWNrOi8vdG9kb19saXN0Ly4vc3JjL21vZHVsZXMvTWFpbi9tYWluRE9NLmpzIiwid2VicGFjazovL3RvZG9fbGlzdC8uL3NyYy9tb2R1bGVzL0Zvcm0vZm9ybVVJLmpzIiwid2VicGFjazovL3RvZG9fbGlzdC8uL3NyYy9tb2R1bGVzL2ZhY3Rvcmllcy9wcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG9fbGlzdC8uL3NyYy9tb2R1bGVzL2ZhY3Rvcmllcy90b2RvLmpzIiwid2VicGFjazovL3RvZG9fbGlzdC8uL3NyYy9tb2R1bGVzL2FwcFN0YXRlTWFuYWdlci5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvbW9kdWxlcy9Gb3JtL2Zvcm1EYXRhSGFuZGxlci5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvbW9kdWxlcy9kYXRhTWFuYWdlci5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kb19saXN0Ly4vc3JjL21vZHVsZXMvbWVkaWF0b3IuanMiLCJ3ZWJwYWNrOi8vdG9kb19saXN0Ly4vc3JjL21vZHVsZXMvU2lkZW5hdi9zaWRlbmF2LmpzIiwid2VicGFjazovL3RvZG9fbGlzdC8uL3NyYy9tb2R1bGVzL0FzaWRlL2FzaWRlLmpzIiwid2VicGFjazovL3RvZG9fbGlzdC8uL3NyYy9tb2R1bGVzL01haW4vbWFpbi5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvbW9kdWxlcy9Gb3JtL2Zvcm0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5jbGFzcyBBc2lkZVVJIHtcbiAgICBjb25zdHJ1Y3Rvcihhc2lkZSl7XG4gICAgICAgIHRoaXMuYXNpZGUgPSBhc2lkZTtcbiAgICAgICAgdGhpcy5jbG9zZUFzaWRlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsb3NlQXNpZGUnKTtcbiAgICAgICAgdGhpcy5hc2lkZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hc2lkZUNvbnRhaW5lcicpO1xuICAgIH1cblxuICAgIGxvYWRVSSgpe1xuICAgICAgICB0aGlzLmNsb3NlQXNpZGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlQXNpZGUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY2xvc2VBc2lkZSgpe1xuICAgICAgICB0aGlzLmFzaWRlQ29udGFpbmVyLnN0eWxlLndpZHRoID0gJzBweCc7XG4gICAgICAgIHRoaXMuYXNpZGUubWVkaWF0b3Iubm90aWZ5KHRoaXMuYXNpZGUsICdhc2lkZUNsb3NlZCcsIG51bGwpO1xuICAgIH1cblxuICAgIG9wZW5Bc2lkZSgpe1xuICAgICAgICB0aGlzLmFzaWRlLm1lZGlhdG9yLm5vdGlmeSh0aGlzLmFzaWRlLCAnYXNpZGVPcGVuZWQnLCBudWxsKTtcbiAgICAgICAgdGhpcy5hc2lkZUNvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcyNDBweCc7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgQXNpZGVVSTsiLCJcbmNsYXNzIEFzaWRlRE9NIHtcbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICB0aGlzLnRhc2tUaXRsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza1RpdGxlJyk7XG4gICAgICAgIHRoaXMuY2hlY2tsaXN0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGVja2xpc3QnKTtcbiAgICAgICAgdGhpcy5kdWVEYXRlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kdWVkYXRlJyk7XG4gICAgICAgIHRoaXMubm90ZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubm90ZScpO1xuICAgICAgICB0aGlzLmNyZWF0ZURhdGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyZWF0ZURhdGUnKTtcbiAgICAgICAgdGhpcy5wcmlvcml0eUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJpb3JpdHknKTtcbiAgICB9XG5cbiAgICByZW5kZXJUYXNrSW5mbyh0YXNrKXtcbiAgICAgICAgdGhpcy50YXNrVGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGFzay50aXRsZTtcbiAgICAgICAgdGhpcy5kdWVEYXRlRWxlbWVudC50ZXh0Q29udGVudCA9IHRhc2suZHVlRGF0ZTtcbiAgICAgICAgdGhpcy5ub3RlRWxlbWVudC50ZXh0Q29udGVudCA9IHRhc2subm90ZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eUVsZW1lbnQudGV4dENvbnRlbnQgPSB0YXNrLnByaW9yaXR5O1xuICAgICAgICB0aGlzLmNyZWF0ZURhdGVFbGVtZW50LnRleHRDb250ZW50ID0gdGFzay5jcmVhdGVEYXRlO1xuXG4gICAgICAgIHRoaXMuY2hlY2tsaXN0RWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICBcbiAgICAgICAgZm9yKGxldCBzdGVwIG9mIHRhc2suY2hlY2tsaXN0KXtcbiAgICAgICAgICAgIGxldCBsaXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICBsaXN0RWxlbWVudC50ZXh0Q29udGVudCA9IHN0ZXAudGl0bGU7XG5cbiAgICAgICAgICAgIHRoaXMuY2hlY2tsaXN0RWxlbWVudC5hcHBlbmRDaGlsZChsaXN0RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBc2lkZURPTTsiLCJcblxuY2xhc3MgU2lkZW5hdkRPTSB7XG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgdGhpcy5kZWZhdWx0TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cy5kZWZhdWx0Jyk7XG4gICAgICAgIHRoaXMudXNlckxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdHMudXNlcicpO1xuICAgIH1cblxuICAgIGNyZWF0ZUVsZW1lbnQodHlwZSwgY2xhc3NMaXN0ID0gW10pe1xuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XG4gICAgICAgIFxuICAgICAgICBjbGFzc0xpc3QuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQodmFsdWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICBjcmVhdGVUaXRsZUVsZW1lbnQodGl0bGUpe1xuICAgICAgICBsZXQgdGl0bGVFbGVtZW50ID0gdGhpcy5jcmVhdGVFbGVtZW50KCdwJywgWyd0aXRsZSddKTtcbiAgICAgICAgdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGl0bGVFbGVtZW50O1xuICAgIH1cblxuICAgIGNyZWF0ZVRhc2tDb3VudGVyKGNvdW50KXtcbiAgICAgICAgbGV0IHRhc2tDb3VudGVyRWxlbWVudCA9IHRoaXMuY3JlYXRlRWxlbWVudCgncCcsIFsndGFza0NvdW50J10pO1xuICAgICAgICB0YXNrQ291bnRlckVsZW1lbnQudGV4dENvbnRlbnQgPSBjb3VudDtcblxuICAgICAgICByZXR1cm4gdGFza0NvdW50ZXJFbGVtZW50O1xuICAgIH1cblxuICAgIGNyZWF0ZVByb2plY3RJdGVtKHByb2plY3RJZCwgcHJvamVjdCl7XG4gICAgICAgIGxldCBwcm9qZWN0SXRlbSA9IHRoaXMuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgcHJvamVjdEl0ZW0uZGF0YXNldC51aWQgPSBwcm9qZWN0SWQ7XG5cbiAgICAgICAgcHJvamVjdEl0ZW0uYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUaXRsZUVsZW1lbnQocHJvamVjdC50aXRsZSkpO1xuXG4gICAgICAgIGlmKHByb2plY3QudG9kb0xpc3QubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICBwcm9qZWN0SXRlbS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRhc2tDb3VudGVyKHByb2plY3QudG9kb0xpc3QubGVuZ3RoKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcHJvamVjdEl0ZW07XG4gICAgfVxuXG4gICAgcmVuZGVyUHJvamVjdHMobGlzdCl7XG4gICAgICAgIHRoaXMuZGVmYXVsdExpc3QuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgdGhpcy51c2VyTGlzdC5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICBcbiAgICAgICAgZm9yKGxldCBbdWlkLCBwcm9qZWN0XSBvZiBsaXN0KXtcbiAgICAgICAgICAgIGxldCBwcm9qZWN0SXRlbSA9IHRoaXMuY3JlYXRlUHJvamVjdEl0ZW0odWlkLCBwcm9qZWN0KTtcblxuICAgICAgICAgICAgaWYocHJvamVjdC50eXBlID09PSAnZGVmYXVsdCcpe1xuICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdExpc3QuYXBwZW5kQ2hpbGQocHJvamVjdEl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXJMaXN0LmFwcGVuZENoaWxkKHByb2plY3RJdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNpZGVuYXZET007IiwiXG5cbmNsYXNzIFNpZGVuYXZVSSB7XG4gICAgY29uc3RydWN0b3IgKHNpZGVuYXYpe1xuICAgICAgICB0aGlzLnNpZGVuYXYgPSBzaWRlbmF2O1xuICAgICAgICB0aGlzLnNpZGVuYXZDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZW5hdkNvbnRhaW5lcicpO1xuICAgICAgICB0aGlzLmFkZFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkUHJvamVjdCcpO1xuICAgICAgICB0aGlzLmNsb3NlU2lkZW5hdkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjbG9zZVNpZGVuYXYnKTtcbiAgICAgICAgdGhpcy5vcGVuU2lkZW5hdkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvcGVuU2lkZW5hdicpO1xuICAgIH1cblxuICAgIGxvYWRVSSgpe1xuICAgICAgICB0aGlzLmFkZFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PntcbiAgICAgICAgICAgIHRoaXMuc2lkZW5hdi5tZWRpYXRvci5ub3RpZnkodGhpcy5zaWRlbmF2LCAnbmV3UHJvamVjdCcsIHRoaXMuc2lkZW5hdi5wcm9qZWN0TGlzdCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5jbG9zZVNpZGVuYXZCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlU2lkZU5hdigpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMub3BlblNpZGVuYXZCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9wZW5TaWRlTmF2KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgICAgICAgIGlmKHdpbmRvdy5pbm5lcldpZHRoID49IDgwMCl7XG4gICAgICAgICAgICAgICAgdGhpcy5zaWRlbmF2Q29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIHRoaXMuc2lkZW5hdkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgdWlkID0gZS50YXJnZXQuY2xvc2VzdCgnbGknKT8uZGF0YXNldC51aWQ7XG4gICAgICAgICAgICBpZighdWlkKSByZXR1cm47XG4gICAgXG4gICAgICAgICAgICB0aGlzLnNpZGVuYXYubWVkaWF0b3Iubm90aWZ5KHRoaXMuc2lkZW5hdiwgJ3Byb2plY3RTZWxlY3RlZCcsIHRoaXMuc2lkZW5hdi5wcm9qZWN0TGlzdC5nZXQodWlkKSk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlU2lkZU5hdigpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvcGVuU2lkZU5hdigpe1xuICAgICAgICB0aGlzLnNpZGVuYXZDb250YWluZXIuc3R5bGUud2lkdGggPSAnMjQwcHgnO1xuICAgICAgICB0aGlzLnNpZGVuYXYubWVkaWF0b3Iubm90aWZ5KHRoaXMuc2lkZW5hdiwgJ3NpZGVuYXZPcGVuZWQnLCBudWxsKTtcbiAgICB9XG5cbiAgICBjbG9zZVNpZGVOYXYoKXtcbiAgICAgICAgdGhpcy5zaWRlbmF2Q29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgdGhpcy5zaWRlbmF2Lm1lZGlhdG9yLm5vdGlmeSh0aGlzLnNpZGVuYXYsICdzaWRlbmF2Q2xvc2VkJywgbnVsbCk7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgU2lkZW5hdlVJOyIsIlxuXG5jbGFzcyBNYWluVUkge1xuICAgIGNvbnN0cnVjdG9yKG1haW4pe1xuICAgICAgICB0aGlzLm1haW4gPSBtYWluO1xuICAgICAgICB0aGlzLnRhc2tMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tsaXN0Jyk7XG4gICAgICAgIHRoaXMuYWRkVGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGRUYXNrJyk7XG4gICAgfVxuXG4gICAgbG9hZFVJKCl7XG4gICAgICAgIHRoaXMuYWRkVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICB0aGlzLm1haW4ubWVkaWF0b3Iubm90aWZ5KHRoaXMubWFpbiwgJ25ld1Rhc2snLCB0aGlzLm1haW4uY3VyclByb2plY3QpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnRhc2tMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGxldCB1aWQgPSBlLnRhcmdldC5kYXRhc2V0LnVpZDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoIXVpZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLm1haW4ubWVkaWF0b3Iubm90aWZ5KHRoaXMubWFpbiwgJ3Rhc2tTZWxlY3RlZCcsIHRoaXMubWFpbi50YXNrTWFwLmdldCh1aWQpKTtcbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuXG5leHBvcnQgZGVmYXVsdCBNYWluVUk7IiwiXG5cbmNsYXNzIE1haW5ET00ge1xuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIHRoaXMudGFza2xpc3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza2xpc3QnKTtcbiAgICAgICAgdGhpcy50aXRsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdFRpdGxlJyk7XG4gICAgfVxuXG4gICAgY3JlYXRlVGFza0l0ZW0odGFza0lkLCB0YXNrTmFtZSl7XG4gICAgICAgIGxldCB0YXNrSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgIHRhc2tJdGVtLmRhdGFzZXQudWlkID0gdGFza0lkO1xuXG4gICAgICAgIHRhc2tJdGVtLnRleHRDb250ZW50ID0gdGFza05hbWU7XG5cbiAgICAgICAgcmV0dXJuIHRhc2tJdGVtO1xuICAgIH1cblxuXG4gICAgcmVuZGVyVGFza3MocHJvamVjdCwgdGFza2xpc3Qpe1xuICAgICAgICB0aGlzLnRhc2tsaXN0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG5cbiAgICAgICAgdGhpcy50aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBwcm9qZWN0LnRpdGxlO1xuICAgICAgICBcbiAgICAgICAgZm9yKGxldCBbdWlkLCB0YXNrXSBvZiB0YXNrbGlzdCl7XG4gICAgICAgICAgICBsZXQgdGFza0l0ZW0gPSB0aGlzLmNyZWF0ZVRhc2tJdGVtKHVpZCwgdGFzay50aXRsZSk7XG5cbiAgICAgICAgICAgIHRoaXMudGFza2xpc3RDb250YWluZXIuYXBwZW5kQ2hpbGQodGFza0l0ZW0pO1xuICAgICAgICB9ICAgICAgICBcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBNYWluRE9NOyIsIlxuY2xhc3MgRm9ybVVJIHtcbiAgICBjb25zdHJ1Y3Rvcihmb3JtKXtcbiAgICAgICAgdGhpcy5mb3JtID0gZm9ybTtcbiAgICAgICAgdGhpcy5wcm9qZWN0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdE1vZGFsJyk7XG4gICAgICAgIHRoaXMudGFza01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tNb2RhbCcpO1xuICAgICAgICB0aGlzLnByb2plY3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RNb2RhbCBmb3JtJyk7XG4gICAgICAgIHRoaXMudGFza0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza01vZGFsIGZvcm0nKTtcbiAgICAgICAgdGhpcy5jbG9zZUZvcm1CdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW2RhdGEtYWN0aW9uPVwiY2xvc2VGb3JtXCJdJyk7XG4gICAgfVxuXG4gICAgbG9hZFVJKCl7XG4gICAgICAgIHRoaXMucHJvamVjdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5mb3JtLmZvcm1EYXRhSGFuZGxlci5oYW5kbGVEYXRhKCdwcm9qZWN0Jyk7XG4gICAgICAgICAgICB0aGlzLnByb2plY3RGb3JtLnJlc2V0KCk7XG4gICAgICAgICAgICB0aGlzLmZvcm0ubWVkaWF0b3Iubm90aWZ5KHRoaXMuZm9ybSwgJ3Byb2plY3RBZGRlZCcsIG51bGwpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnRhc2tGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZm9ybS5mb3JtRGF0YUhhbmRsZXIuaGFuZGxlRGF0YSgndGFzaycpO1xuICAgICAgICAgICAgdGhpcy50YXNrRm9ybS5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5mb3JtLm1lZGlhdG9yLm5vdGlmeSh0aGlzLmZvcm0sICd0YXNrQWRkZWQnLCBudWxsKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jbG9zZUZvcm1CdG5zLmZvckVhY2goKGN1cnIpID0+IHtcbiAgICAgICAgICAgIGN1cnIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PntcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5jbG9zZXN0KCcubW9kYWxCb3gnKS5jbG9zZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNob3dQcm9qZWN0Rm9ybSgpe1xuICAgICAgICB0aGlzLnByb2plY3RNb2RhbC5zaG93TW9kYWwoKTtcbiAgICB9XG5cbiAgICBzaG93VGFza0Zvcm0oKXtcbiAgICAgICAgdGhpcy50YXNrTW9kYWwuc2hvd01vZGFsKCk7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgRm9ybVVJOyIsIlxuY2xhc3MgUHJvamVjdCB7XG4gICAgY29uc3RydWN0b3IodGl0bGUgPSAnJywgdG9kb0xpc3QgPSBbXSwgdHlwZSA9ICd1c2VyJyl7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy50b2RvTGlzdCA9IHRvZG9MaXN0O1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIH1cblxuICAgIGFkZFRvZG8odG9kbyl7XG4gICAgICAgIHRoaXMudG9kb0xpc3QucHVzaCh0b2RvKTtcbiAgICB9XG5cbiAgICByZW1vdmVUb2RvKHRvZG8pe1xuICAgICAgICB0aGlzLnRvZG9MaXN0ID0gIHRoaXMudG9kb0xpc3QuZmlsdGVyKChjdXJyKSA9PiB7Y3VyciAhPT0gdG9kb30pO1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFByb2plY3Q7IiwiXG5jbGFzcyBTdGVwe1xuICAgIGNvbnN0cnVjdG9yKHRpdGxlID0gJycsIGlzQ29tcGxldGUgPSBmYWxzZSl7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5pc0NvbXBsZXRlID0gaXNDb21wbGV0ZTtcbiAgICB9XG59O1xuXG5jbGFzcyBUb2RvIHtcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSA9ICcnLCBkdWVEYXRlID0gJycsIHByaW9yaXR5ID0gJycsIGNoZWNrbGlzdCA9IFtdLCBpc0NvbXBsZXRlID0gZmFsc2UsIG5vdGUgPSAnJyl7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICB0aGlzLmNoZWNrbGlzdCA9IGNoZWNrbGlzdDtcbiAgICAgICAgdGhpcy5pc0NvbXBsZXRlID0gaXNDb21wbGV0ZTtcbiAgICAgICAgdGhpcy5ub3RlID0gbm90ZTtcbiAgICAgICAgdGhpcy5jcmVhdGVEYXRlID0gbmV3IERhdGUoKS50b0RhdGVTdHJpbmcoKTtcbiAgICB9XG5cbiAgICBhZGRTdGVwKHN0ZXApe1xuICAgICAgICB0aGlzLmNoZWNrbGlzdC5wdXNoKHN0ZXApO1xuICAgIH1cblxuICAgIGNoYW5nZVN0YXR1cygpe1xuICAgICAgICB0aGlzLmlzQ29tcGxldGUgPSAhdGhpcy5pc0NvbXBsZXRlO1xuICAgIH1cblxuICAgIGNoYW5nZVByaW9yaXR5KHByaW9yaXR5KXtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgIH1cblxuICAgIGNoYW5nZUR1ZURhdGUoZGF0ZSl7XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGRhdGU7XG4gICAgfVxufTtcblxuZXhwb3J0IHtTdGVwLCBUb2RvfTsiLCJcbmNsYXNzIEFwcFN0YXRlTWFuYWdlcntcbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICB0aGlzLm1lZGlhdG9yID0gbnVsbDtcbiAgICAgICAgdGhpcy5jdXJyUHJvamVjdExpc3QgPSBudWxsO1xuICAgICAgICB0aGlzLmN1cnJQcm9qZWN0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5jdXJyVGFzayA9IG51bGw7XG4gICAgfVxuXG4gICAgZ2V0Q3VyclByb2plY3RMaXN0KCl7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJQcm9qZWN0TGlzdDtcbiAgICB9XG5cbiAgICBnZXRDdXJyUHJvamVjdCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyUHJvamVjdDtcbiAgICB9XG5cbiAgICBnZXRDdXJyVGFzaygpe1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyVGFzaztcbiAgICB9XG5cbiAgICBzZXRQcm9qZWN0TGlzdChwcm9qZWN0TGlzdCl7XG4gICAgICAgIHRoaXMuY3VyclByb2plY3RMaXN0ID0gcHJvamVjdExpc3Q7XG4gICAgfVxuXG4gICAgc2V0UHJvamVjdChwcm9qZWN0KXtcbiAgICAgICAgdGhpcy5jdXJyUHJvamVjdCA9IHByb2plY3Q7XG4gICAgfVxuXG4gICAgc2V0VGFzayh0YXNrbGlzdCl7XG4gICAgICAgIHRoaXMuY3VyclRhc2tsaXN0ID0gdGFza2xpc3Q7XG4gICAgfVxuXG4gICAgc2V0TWVkaWF0b3IobWVkaWF0b3Ipe1xuICAgICAgICB0aGlzLm1lZGlhdG9yID0gbWVkaWF0b3I7XG4gICAgfVxuXG4gICAgcmVjZWl2ZU5vdGlmaWNhdGlvbihldmVudFR5cGUsIGRhdGEpe1xuICAgICAgICBpZihldmVudFR5cGUgPT0gJ3Byb2plY3RzTG9hZGVkJyl7XG4gICAgICAgICAgICB0aGlzLmN1cnJQcm9qZWN0TGlzdCA9IGRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihldmVudFR5cGUgPT0gJ3Byb2plY3RTZWxlY3RlZCcpe1xuICAgICAgICAgICAgdGhpcy5jdXJyUHJvamVjdCA9IGRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihldmVudFR5cGUgPT0gJ3Rhc2tTZWxlY3RlZCcpe1xuICAgICAgICAgICAgdGhpcy5jdXJyVGFzayA9IGRhdGE7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5jb25zdCBhcHBTdGF0ZU1hbmFnZXIgPSBuZXcgQXBwU3RhdGVNYW5hZ2VyKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGFwcFN0YXRlTWFuYWdlcjsiLCJpbXBvcnQgUHJvamVjdCBmcm9tIFwiLi4vZmFjdG9yaWVzL3Byb2plY3RcIjtcbmltcG9ydCB7IFRvZG8sIFN0ZXAgfSBmcm9tIFwiLi4vZmFjdG9yaWVzL3RvZG9cIjtcbmltcG9ydCBhcHBTdGF0ZU1hbmFnZXIgZnJvbSBcIi4uL2FwcFN0YXRlTWFuYWdlclwiO1xuXG5jbGFzcyBGb3JtRGF0YUhhbmRsZXIge1xuICAgIFxuICAgIGhhbmRsZURhdGEoZGF0YVR5cGUpe1xuICAgICAgICBpZihkYXRhVHlwZSA9PSAncHJvamVjdCcpe1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVOZXdQcm9qZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihkYXRhVHlwZSA9PSAndGFzaycpe1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVOZXdUYXNrKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjcmVhdGVOZXdQcm9qZWN0KCl7XG4gICAgICAgIGxldCBwcm9qZWN0VGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdFRpdGxlSW5wdXQnKS52YWx1ZTtcbiAgICAgICAgbGV0IHByb2plY3QgPSBuZXcgUHJvamVjdChwcm9qZWN0VGl0bGUpO1xuICAgICAgICBcbiAgICAgICAgYXBwU3RhdGVNYW5hZ2VyLmN1cnJQcm9qZWN0TGlzdC5zZXQodGhpcy5nZXRVSUQoKSwgcHJvamVjdCk7XG4gICAgfVxuXG4gICAgY3JlYXRlTmV3VGFzaygpe1xuICAgICAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFza1RpdGxlSW5wdXQnKS52YWx1ZTtcbiAgICAgICAgbGV0IGR1ZWRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZHVlZGF0ZUlucHV0JykudmFsdWU7XG4gICAgICAgIGxldCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eUlucHV0JykudmFsdWU7XG4gICAgICAgIGxldCBub3RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25vdGVJbnB1dCcpLnZhbHVlO1xuXG4gICAgICAgIGxldCB0b2RvID0gbmV3IFRvZG8odGl0bGUsIGR1ZWRhdGUsIHByaW9yaXR5LCBbXSwgZmFsc2UsIG5vdGUpO1xuICAgICAgICBhcHBTdGF0ZU1hbmFnZXIuY3VyclByb2plY3QuYWRkVG9kbyh0b2RvKTtcbiAgICB9XG5cbiAgICBnZXRVSUQoKXtcbiAgICAgICAgbGV0IHJhbmRvbU51bSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDFlOSk7XG4gICAgICAgIHJldHVybiByYW5kb21OdW0udG9TdHJpbmcoMzYpO1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1EYXRhSGFuZGxlcjsiLCJpbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9mYWN0b3JpZXMvcHJvamVjdC5qc1wiO1xuaW1wb3J0IHsgU3RlcCwgVG9kbyB9IGZyb20gXCIuL2ZhY3Rvcmllcy90b2RvLmpzXCI7XG5cblxuY2xhc3MgRGF0YU1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHByb2plY3RzKXtcbiAgICAgICAgdGhpcy5Qcm9qZWN0TGlzdCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5pbml0KHByb2plY3RzKTtcbiAgICB9XG5cbiAgICBpbml0KHByb2plY3RzKXtcbiAgICAgICAgcHJvamVjdHMuZm9yRWFjaChwcm9qZWN0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuUHJvamVjdExpc3Quc2V0KHRoaXMuZ2V0VUlEKCksIHByb2plY3QpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGRQcm9qZWN0KHRpdGxlLCB0b2RvTGlzdCl7XG4gICAgICAgIGxldCBwcm9qZWN0ID0gbmV3IFByb2plY3QodGl0bGUsIHRvZG9MaXN0KTtcbiAgICAgICAgdGhpcy5Qcm9qZWN0TGlzdC5zZXQodGhpcy5nZXRVSUQoKSwgcHJvamVjdCk7XG4gICAgfVxuXG4gICAgZ2V0VUlEKCl7XG4gICAgICAgIGxldCByYW5kb21OdW0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxZTkpO1xuICAgICAgICByZXR1cm4gcmFuZG9tTnVtLnRvU3RyaW5nKDM2KTtcbiAgICB9XG59O1xuXG5cbmNvbnN0IHRvZG9BcnJheSA9IFtcbiAgICBuZXcgVG9kbyhcIlRhc2sgMVwiLCBcIjIwMjMtMTItMjBcIiwgXCJIaWdoXCIsIFtuZXcgU3RlcChcIlN0ZXAgMVwiLCBmYWxzZSksIG5ldyBTdGVwKFwiU3RlcCAyXCIsIHRydWUpXSwgZmFsc2UpLFxuICAgIG5ldyBUb2RvKFwiVGFzayAyXCIsIFwiMjAyMy0xMi0yMVwiLCBcIk1lZGl1bVwiLCBbbmV3IFN0ZXAoXCJTdGVwIDFcIiwgZmFsc2UpLCBuZXcgU3RlcChcIlN0ZXAgMlwiLCB0cnVlKV0sIGZhbHNlKSxcbiAgICBuZXcgVG9kbyhcIlRhc2sgM1wiLCBcIjIwMjMtMTItMjJcIiwgXCJMb3dcIiwgW25ldyBTdGVwKFwiU3RlcCAxXCIsIGZhbHNlKSwgbmV3IFN0ZXAoXCJTdGVwIDJcIiksIHRydWVdLCB0cnVlKSxcbiAgICBuZXcgVG9kbyhcIlRhc2sgNFwiLCBcIjIwMjMtMTItMjNcIiwgXCJIaWdoXCIsIFtuZXcgU3RlcChcIlN0ZXAgMVwiLCBmYWxzZSksIG5ldyBTdGVwKFwiU3RlcCAyXCIpLCB0cnVlXSwgZmFsc2UpLFxuICAgIG5ldyBUb2RvKFwiVGFzayA1XCIsIFwiMjAyMy0xMi0yNFwiLCBcIk1lZGl1bVwiLCBbbmV3IFN0ZXAoXCJTdGVwIDFcIiwgZmFsc2UpLCBuZXcgU3RlcChcIlN0ZXAgMlwiKSwgdHJ1ZV0sIGZhbHNlKSxcbiAgICBuZXcgVG9kbyhcIlRhc2sgNlwiLCBcIjIwMjMtMTItMjVcIiwgXCJMb3dcIiwgW25ldyBTdGVwKFwiU3RlcCAxXCIsIGZhbHNlKSwgbmV3IFN0ZXAoXCJTdGVwIDJcIiksIHRydWVdLCB0cnVlKSxcbiAgICBuZXcgVG9kbyhcIlRhc2sgN1wiLCBcIjIwMjMtMTItMjZcIiwgXCJIaWdoXCIsIFtuZXcgU3RlcChcIlN0ZXAgMVwiLCBmYWxzZSksIG5ldyBTdGVwKFwiU3RlcCAyXCIpLCB0cnVlXSwgZmFsc2UpLFxuICAgIG5ldyBUb2RvKFwiVGFzayA4XCIsIFwiMjAyMy0xMi0yN1wiLCBcIk1lZGl1bVwiLCBbbmV3IFN0ZXAoXCJTdGVwIDFcIiwgZmFsc2UpLCBuZXcgU3RlcChcIlN0ZXAgMlwiKSwgdHJ1ZV0sIGZhbHNlKSxcbiAgICBuZXcgVG9kbyhcIlRhc2sgOVwiLCBcIjIwMjMtMTItMjhcIiwgXCJMb3dcIiwgW25ldyBTdGVwKFwiU3RlcCAxXCIsIGZhbHNlKSwgbmV3IFN0ZXAoXCJTdGVwIDJcIiksIHRydWVdLCB0cnVlKSxcbiAgICBuZXcgVG9kbyhcIlRhc2sgMTBcIiwgXCIyMDIzLTEyLTI5XCIsIFwiSGlnaFwiLCBbbmV3IFN0ZXAoXCJTdGVwIDFcIiwgZmFsc2UpLCBuZXcgU3RlcChcIlN0ZXAgMlwiKSwgdHJ1ZV0sIGZhbHNlKVxuXTtcblxuXG5sZXQgZGVmYXVsdFByb2plY3RzID0gW25ldyBQcm9qZWN0KCdUb2RheScsIFtdLCAnZGVmYXVsdCcpLCBuZXcgUHJvamVjdCgnSW1wb3J0YW50JywgW10sICdkZWZhdWx0JyksIFxuICAgICAgICAgICAgICAgICAgICBuZXcgUHJvamVjdCgnQ29tcGxldGVkJywgW10sICdkZWZhdWx0JyksIG5ldyBQcm9qZWN0KCdUYXNrcycsIHRvZG9BcnJheSwgJ2RlZmF1bHQnKV07XG5cblxuY29uc3QgZGF0YU1hbmFnZXIgPSBuZXcgRGF0YU1hbmFnZXIoZGVmYXVsdFByb2plY3RzKTtcblxuZXhwb3J0IGRlZmF1bHQgZGF0YU1hbmFnZXI7IiwiLy8gaW1wb3J0IHsgbG9hZFNpZGVuYXZVSX0gZnJvbSBcIi4vbW9kdWxlcy9zaWRlbmF2Q29udHJvbGxlci5qc1wiO1xuLy8gaW1wb3J0IHsgbG9hZEFzaWRlVUkgfSBmcm9tIFwiLi9tb2R1bGVzL2FzaWRlQ29udHJvbGxlci5qc1wiO1xuLy8gaW1wb3J0IHsgbG9hZE1haW5VSSB9IGZyb20gXCIuL21vZHVsZXMvbWFpbkNvbnRyb2xsZXIuanNcIjtcbi8vIGltcG9ydCB7IGxvYWRNb2RhbFVJIH0gZnJvbSBcIi4vbW9kdWxlcy9tb2RhbEJveC5qc1wiO1xuLy8gaW1wb3J0IHsgbG9hZEZvcm1VSSB9IGZyb20gXCIuL21vZHVsZXMvZm9ybS5qc1wiO1xuXG4vLyBsb2FkU2lkZW5hdlVJKCk7XG4vLyBsb2FkQXNpZGVVSSgpO1xuLy8gbG9hZE1haW5VSSgpO1xuLy8gbG9hZE1vZGFsVUkoKTtcbi8vIGxvYWRGb3JtVUkoKTtcblxuXG5pbXBvcnQgQXNpZGUgZnJvbSBcIi4vbW9kdWxlcy9Bc2lkZS9hc2lkZS5qc1wiO1xuaW1wb3J0IFNpZGVuYXYgZnJvbSBcIi4vbW9kdWxlcy9TaWRlbmF2L3NpZGVuYXYuanNcIjtcbmltcG9ydCBNYWluIGZyb20gXCIuL21vZHVsZXMvTWFpbi9tYWluLmpzXCI7XG5pbXBvcnQgTWVkaWF0b3IgZnJvbSBcIi4vbW9kdWxlcy9tZWRpYXRvci5qc1wiO1xuaW1wb3J0IEZvcm0gZnJvbSBcIi4vbW9kdWxlcy9Gb3JtL2Zvcm0uanNcIjtcbmltcG9ydCBkYXRhTWFuYWdlciBmcm9tIFwiLi9tb2R1bGVzL2RhdGFNYW5hZ2VyLmpzXCI7XG5pbXBvcnQgYXBwU3RhdGVNYW5hZ2VyIGZyb20gXCIuL21vZHVsZXMvYXBwU3RhdGVNYW5hZ2VyLmpzXCI7XG5cbmNvbnN0IG1lZGlhdG9yID0gbmV3IE1lZGlhdG9yKCk7XG5jb25zdCBzaWRlbmF2ID0gbmV3IFNpZGVuYXYoZGF0YU1hbmFnZXIuUHJvamVjdExpc3QpO1xuY29uc3QgYXNpZGUgPSBuZXcgQXNpZGUoKTtcbmNvbnN0IG1haW4gPSBuZXcgTWFpbigpO1xuY29uc3QgZm9ybSA9IG5ldyBGb3JtKCk7XG5cbm1lZGlhdG9yLnJlZ2lzdGVyKHNpZGVuYXYpO1xubWVkaWF0b3IucmVnaXN0ZXIobWFpbik7XG5tZWRpYXRvci5yZWdpc3Rlcihhc2lkZSk7XG5tZWRpYXRvci5yZWdpc3Rlcihmb3JtKTtcbm1lZGlhdG9yLnJlZ2lzdGVyKGFwcFN0YXRlTWFuYWdlcik7XG5cbnNpZGVuYXYuaW5pdCgpO1xubWFpbi5pbml0KCk7XG5hc2lkZS5pbml0KCk7XG5mb3JtLmluaXQoKTtcbiIsImNsYXNzIE1lZGlhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBuZXcgU2V0KCk7XG4gICAgfVxuXG4gICAgcmVnaXN0ZXIoY29tcG9uZW50KXtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzLmFkZChjb21wb25lbnQpO1xuICAgICAgICBjb21wb25lbnQuc2V0TWVkaWF0b3IodGhpcyk7XG4gICAgfVxuXG4gICAgdW5yZWdpc3Rlcihjb21wb25lbnQpe1xuICAgICAgICB0aGlzLmNvbXBvbmVudHMuZGVsZXRlKGNvbXBvbmVudCk7XG4gICAgICAgIGNvbXBvbmVudC5zZXRNZWRpYXRvcihudWxsKTtcbiAgICB9XG5cbiAgICBub3RpZnkoc2VuZGVyLCBldmVudFR5cGUsIGRhdGEpe1xuICAgICAgICBjb25zb2xlLmxvZyhldmVudFR5cGUpO1xuXG4gICAgICAgIHRoaXMuY29tcG9uZW50cy5mb3JFYWNoKChjb21wb25lbnQpID0+IHtcbiAgICAgICAgICAgIGlmKGNvbXBvbmVudCAhPT0gc2VuZGVyKXtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQucmVjZWl2ZU5vdGlmaWNhdGlvbihldmVudFR5cGUsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBNZWRpYXRvcjsiLCJpbXBvcnQgU2lkZW5hdkRPTSBmcm9tIFwiLi9zaWRlbmF2RE9NLmpzXCI7XG5pbXBvcnQgU2lkZW5hdlVJIGZyb20gXCIuL3NpZGVuYXZVSS5qc1wiO1xuXG5jbGFzcyBTaWRlbmF2IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9qZWN0TGlzdCl7XG4gICAgICAgIHRoaXMubWVkaWF0b3IgPSBudWxsO1xuXG4gICAgICAgIHRoaXMucHJvamVjdExpc3QgPSBwcm9qZWN0TGlzdDtcbiAgICAgICAgdGhpcy5zaWRlbmF2RE9NID0gbmV3IFNpZGVuYXZET00oKTtcbiAgICAgICAgdGhpcy5zaWRlbmF2VUkgPSBuZXcgU2lkZW5hdlVJKHRoaXMpO1xuICAgIH1cblxuICAgIHNlbGVjdERlZmF1bHRQcm9qZWN0KCl7XG4gICAgICAgIHRoaXMubWVkaWF0b3Iubm90aWZ5KHRoaXMsICdwcm9qZWN0U2VsZWN0ZWQnLCB0aGlzLnByb2plY3RMaXN0LnZhbHVlcygpLm5leHQoKS52YWx1ZSk7XG4gICAgfVxuXG4gICAgaW5pdCgpe1xuICAgICAgICB0aGlzLnNpZGVuYXZET00ucmVuZGVyUHJvamVjdHModGhpcy5wcm9qZWN0TGlzdCk7XG4gICAgICAgIHRoaXMubWVkaWF0b3Iubm90aWZ5KHRoaXMsICdwcm9qZWN0c0xvYWRlZCcsIHRoaXMucHJvamVjdExpc3QpO1xuICAgICAgICB0aGlzLnNpZGVuYXZVSS5sb2FkVUkoKTtcbiAgICAgICAgdGhpcy5zZWxlY3REZWZhdWx0UHJvamVjdCgpO1xuICAgIH1cblxuICAgIHJlZnJlc2goKXtcbiAgICAgICAgdGhpcy5zaWRlbmF2RE9NLnJlbmRlclByb2plY3RzKHRoaXMucHJvamVjdExpc3QpO1xuICAgICAgICB0aGlzLm1lZGlhdG9yLm5vdGlmeSh0aGlzLCAncHJvamVjdHNMb2FkZWQnLCB0aGlzLnByb2plY3RMaXN0KTtcbiAgICB9XG5cbiAgICBzZXRNZWRpYXRvcihtZWRpYXRvcil7XG4gICAgICAgIHRoaXMubWVkaWF0b3IgPSBtZWRpYXRvcjtcbiAgICB9ICBcblxuICAgIHJlY2VpdmVOb3RpZmljYXRpb24oZXZlbnRUeXBlLCBkYXRhKXtcbiAgICAgICAgaWYoZXZlbnRUeXBlID09ICdhc2lkZU9wZW5lZCcpe1xuICAgICAgICAgICAgdGhpcy5zaWRlbmF2VUkuY2xvc2VTaWRlTmF2KCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZihldmVudFR5cGUgPT0gJ3Byb2plY3RBZGRlZCcgfHwgZXZlbnRUeXBlID09ICd0YXNrQWRkZWQnKXtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgU2lkZW5hdjsiLCJpbXBvcnQgQXNpZGVVSSBmcm9tIFwiLi9hc2lkZVVJLmpzXCI7XG5pbXBvcnQgQXNpZGVET00gZnJvbSBcIi4vYXNpZGVET00uanNcIjtcblxuXG5jbGFzcyBBc2lkZSB7XG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgdGhpcy5jdXJyVGFzayA9IG51bGw7XG4gICAgICAgIHRoaXMubWVkaWF0b3IgPSBudWxsO1xuICAgICAgICB0aGlzLmFzaWRlVUkgPSBuZXcgQXNpZGVVSSh0aGlzKTtcbiAgICAgICAgdGhpcy5hc2lkZURPTSA9IG5ldyBBc2lkZURPTSgpO1xuICAgIH1cblxuICAgIGluaXQoKXtcbiAgICAgICAgdGhpcy5hc2lkZVVJLmxvYWRVSSgpO1xuICAgIH1cblxuICAgIHJlZnJlc2goKXtcbiAgICAgICAgdGhpcy5hc2lkZURPTS5yZW5kZXJUYXNrSW5mbyh0aGlzLmN1cnJUYXNrKTtcbiAgICB9XG5cbiAgICBzaG93VGFza0luZm8oKXtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIHRoaXMuYXNpZGVVSS5vcGVuQXNpZGUoKTtcbiAgICB9XG5cbiAgICBzZXRDdXJyVGFzayh0YXNrKXtcbiAgICAgICAgdGhpcy5jdXJyVGFzayA9IHRhc2s7XG4gICAgfVxuXG4gICAgc2V0TWVkaWF0b3IobWVkaWF0b3Ipe1xuICAgICAgICB0aGlzLm1lZGlhdG9yID0gbWVkaWF0b3I7XG4gICAgfVxuXG4gICAgcmVjZWl2ZU5vdGlmaWNhdGlvbihldmVudFR5cGUsIGRhdGEpe1xuICAgICAgICBpZihldmVudFR5cGUgPT0gJ3Rhc2tTZWxlY3RlZCcpe1xuICAgICAgICAgICAgdGhpcy5zZXRDdXJyVGFzayhkYXRhKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd1Rhc2tJbmZvKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZihldmVudFR5cGUgPT0gJ3NpZGVuYXZPcGVuZWQnIHx8IGV2ZW50VHlwZSA9PSAncHJvamVjdFNlbGVjdGVkJyl7XG4gICAgICAgICAgICB0aGlzLmFzaWRlVUkuY2xvc2VBc2lkZSgpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgQXNpZGU7IiwiaW1wb3J0IE1haW5VSSBmcm9tIFwiLi9tYWluVUkuanNcIjtcbmltcG9ydCBNYWluRE9NIGZyb20gXCIuL21haW5ET00uanNcIjtcblxuY2xhc3MgTWFpbiB7XG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgdGhpcy5jdXJyUHJvamVjdCA9IG51bGw7XG4gICAgICAgIHRoaXMudGFza01hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5tZWRpYXRvciA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5tYWluVUkgPSBuZXcgTWFpblVJKHRoaXMpO1xuICAgICAgICB0aGlzLm1haW5ET00gPSBuZXcgTWFpbkRPTSgpO1xuICAgIH1cblxuICAgIGluaXQoKXtcbiAgICAgICAgdGhpcy5tYWluVUkubG9hZFVJKCk7XG4gICAgfVxuXG4gICAgcmVmcmVzaCgpe1xuICAgICAgICB0aGlzLmxvYWRQcm9qZWN0RGF0YSgpO1xuICAgICAgICB0aGlzLm1haW5ET00ucmVuZGVyVGFza3ModGhpcy5jdXJyUHJvamVjdCwgdGhpcy50YXNrTWFwKTtcbiAgICB9XG5cbiAgICBsb2FkUHJvamVjdERhdGEoKXtcbiAgICAgICAgdGhpcy50YXNrTWFwLmNsZWFyKCk7XG5cbiAgICAgICAgbGV0IHRvZG9MaXN0ID0gdGhpcy5jdXJyUHJvamVjdC50b2RvTGlzdDtcbiAgICAgICAgdG9kb0xpc3QuZm9yRWFjaCgodG9kbykgPT4ge1xuICAgICAgICAgICAgdGhpcy50YXNrTWFwLnNldCh0aGlzLmdldFVJRCgpLCB0b2RvKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0VUlEKCl7XG4gICAgICAgIGxldCByYW5kb21OdW0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxZTkpO1xuICAgICAgICByZXR1cm4gcmFuZG9tTnVtLnRvU3RyaW5nKDM2KTtcbiAgICB9XG5cbiAgICBzZXRNZWRpYXRvcihtZWRpYXRvcil7XG4gICAgICAgIHRoaXMubWVkaWF0b3IgPSBtZWRpYXRvcjtcbiAgICB9XG5cbiAgICByZWNlaXZlTm90aWZpY2F0aW9uKGV2ZW50VHlwZSwgZGF0YSl7XG4gICAgICAgIGlmKGV2ZW50VHlwZSA9PSAncHJvamVjdFNlbGVjdGVkJyl7XG4gICAgICAgICAgICB0aGlzLmN1cnJQcm9qZWN0ID0gZGF0YTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoZXZlbnRUeXBlID09ICd0YXNrQWRkZWQnKXtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgTWFpbjsiLCJpbXBvcnQgRm9ybVVJIGZyb20gXCIuL2Zvcm1VSS5qc1wiO1xuaW1wb3J0IEZvcm1EYXRhSGFuZGxlciBmcm9tIFwiLi9mb3JtRGF0YUhhbmRsZXIuanNcIjtcblxuY2xhc3MgRm9ybSB7XG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgdGhpcy5mb3JtVUkgPSBuZXcgRm9ybVVJKHRoaXMpO1xuICAgICAgICB0aGlzLmZvcm1EYXRhSGFuZGxlciA9IG5ldyBGb3JtRGF0YUhhbmRsZXIoKTtcbiAgICAgICAgdGhpcy5tZWRpYXRvciA9IG51bGw7XG4gICAgfVxuXG4gICAgaW5pdCgpe1xuICAgICAgICB0aGlzLmZvcm1VSS5sb2FkVUkoKTtcbiAgICB9XG5cbiAgICBzZXRNZWRpYXRvcihtZWRpYXRvcil7XG4gICAgICAgIHRoaXMubWVkaWF0b3IgPSBtZWRpYXRvcjtcbiAgICB9XG5cbiAgICByZWNlaXZlTm90aWZpY2F0aW9uKGV2ZW50VHlwZSwgZGF0YSl7XG4gICAgICAgIGlmKGV2ZW50VHlwZSA9PSAnbmV3UHJvamVjdCcpe1xuICAgICAgICAgICAgdGhpcy5mb3JtVUkuc2hvd1Byb2plY3RGb3JtKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZihldmVudFR5cGUgPT0gJ25ld1Rhc2snKXtcbiAgICAgICAgICAgIHRoaXMuZm9ybVVJLnNob3dUYXNrRm9ybSgpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgRm9ybTsiXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJhc2lkZSIsInRoaXMiLCJjbG9zZUFzaWRlQnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYXNpZGVDb250YWluZXIiLCJsb2FkVUkiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xvc2VBc2lkZSIsInN0eWxlIiwid2lkdGgiLCJtZWRpYXRvciIsIm5vdGlmeSIsIm9wZW5Bc2lkZSIsInRhc2tUaXRsZUVsZW1lbnQiLCJjaGVja2xpc3RFbGVtZW50IiwiZHVlRGF0ZUVsZW1lbnQiLCJub3RlRWxlbWVudCIsImNyZWF0ZURhdGVFbGVtZW50IiwicHJpb3JpdHlFbGVtZW50IiwicmVuZGVyVGFza0luZm8iLCJ0YXNrIiwidGV4dENvbnRlbnQiLCJ0aXRsZSIsImR1ZURhdGUiLCJub3RlIiwicHJpb3JpdHkiLCJjcmVhdGVEYXRlIiwiaW5uZXJIVE1MIiwic3RlcCIsImNoZWNrbGlzdCIsImxpc3RFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiZGVmYXVsdExpc3QiLCJ1c2VyTGlzdCIsInR5cGUiLCJjbGFzc0xpc3QiLCJlbGVtZW50IiwiZm9yRWFjaCIsInZhbHVlIiwiYWRkIiwiY3JlYXRlVGl0bGVFbGVtZW50IiwidGl0bGVFbGVtZW50IiwiY3JlYXRlVGFza0NvdW50ZXIiLCJjb3VudCIsInRhc2tDb3VudGVyRWxlbWVudCIsImNyZWF0ZVByb2plY3RJdGVtIiwicHJvamVjdElkIiwicHJvamVjdCIsInByb2plY3RJdGVtIiwiZGF0YXNldCIsInVpZCIsInRvZG9MaXN0IiwibGVuZ3RoIiwicmVuZGVyUHJvamVjdHMiLCJsaXN0Iiwic2lkZW5hdiIsInNpZGVuYXZDb250YWluZXIiLCJhZGRQcm9qZWN0QnRuIiwiY2xvc2VTaWRlbmF2QnRuIiwib3BlblNpZGVuYXZCdG4iLCJlIiwicHJvamVjdExpc3QiLCJjbG9zZVNpZGVOYXYiLCJvcGVuU2lkZU5hdiIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ0YXJnZXQiLCJjbG9zZXN0IiwiZ2V0IiwibWFpbiIsInRhc2tMaXN0IiwiYWRkVGFza0J0biIsImN1cnJQcm9qZWN0IiwidGFza01hcCIsInRhc2tsaXN0Q29udGFpbmVyIiwiY3JlYXRlVGFza0l0ZW0iLCJ0YXNrSWQiLCJ0YXNrTmFtZSIsInRhc2tJdGVtIiwicmVuZGVyVGFza3MiLCJ0YXNrbGlzdCIsImZvcm0iLCJwcm9qZWN0TW9kYWwiLCJ0YXNrTW9kYWwiLCJwcm9qZWN0Rm9ybSIsInRhc2tGb3JtIiwiY2xvc2VGb3JtQnRucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JtRGF0YUhhbmRsZXIiLCJoYW5kbGVEYXRhIiwicmVzZXQiLCJjdXJyIiwiY2xvc2UiLCJzaG93UHJvamVjdEZvcm0iLCJzaG93TW9kYWwiLCJzaG93VGFza0Zvcm0iLCJhZGRUb2RvIiwidG9kbyIsInB1c2giLCJyZW1vdmVUb2RvIiwiZmlsdGVyIiwiU3RlcCIsImlzQ29tcGxldGUiLCJUb2RvIiwiRGF0ZSIsInRvRGF0ZVN0cmluZyIsImFkZFN0ZXAiLCJjaGFuZ2VTdGF0dXMiLCJjaGFuZ2VQcmlvcml0eSIsImNoYW5nZUR1ZURhdGUiLCJkYXRlIiwiYXBwU3RhdGVNYW5hZ2VyIiwiY3VyclByb2plY3RMaXN0IiwiY3VyclRhc2siLCJnZXRDdXJyUHJvamVjdExpc3QiLCJnZXRDdXJyUHJvamVjdCIsImdldEN1cnJUYXNrIiwic2V0UHJvamVjdExpc3QiLCJzZXRQcm9qZWN0Iiwic2V0VGFzayIsImN1cnJUYXNrbGlzdCIsInNldE1lZGlhdG9yIiwicmVjZWl2ZU5vdGlmaWNhdGlvbiIsImV2ZW50VHlwZSIsImRhdGEiLCJkYXRhVHlwZSIsImNyZWF0ZU5ld1Byb2plY3QiLCJjcmVhdGVOZXdUYXNrIiwicHJvamVjdFRpdGxlIiwic2V0IiwiZ2V0VUlEIiwiZHVlZGF0ZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRvU3RyaW5nIiwidG9kb0FycmF5IiwiZGVmYXVsdFByb2plY3RzIiwicHJvamVjdHMiLCJQcm9qZWN0TGlzdCIsIk1hcCIsImluaXQiLCJhZGRQcm9qZWN0IiwiY29tcG9uZW50cyIsIlNldCIsInJlZ2lzdGVyIiwiY29tcG9uZW50IiwidW5yZWdpc3RlciIsImRlbGV0ZSIsInNlbmRlciIsImNvbnNvbGUiLCJsb2ciLCJzaWRlbmF2RE9NIiwic2lkZW5hdlVJIiwic2VsZWN0RGVmYXVsdFByb2plY3QiLCJ2YWx1ZXMiLCJuZXh0IiwicmVmcmVzaCIsImFzaWRlVUkiLCJhc2lkZURPTSIsInNob3dUYXNrSW5mbyIsInNldEN1cnJUYXNrIiwibWFpblVJIiwibWFpbkRPTSIsImxvYWRQcm9qZWN0RGF0YSIsImNsZWFyIiwiZm9ybVVJIl0sInNvdXJjZVJvb3QiOiIifQ==